{"rendered_body":"\n<h1>\n<span id=\"ルートパワー問題とは\" class=\"fragment\"></span><a href=\"#%E3%83%AB%E3%83%BC%E3%83%88%E3%83%91%E3%83%AF%E3%83%BC%E5%95%8F%E9%A1%8C%E3%81%A8%E3%81%AF\"><i class=\"fa fa-link\"></i></a>「『ルート・パワー』問題」とは</h1>\n\n<p><a href=\"https://codeiq.jp/q/1563\" rel=\"nofollow noopener\" target=\"_blank\">CodeIQ「『ルート・パワー』問題」</a>の掲載期間が終わり、提出コードを公開してよいとのことなので、その流れに乗りたいと思います。問題の内容や出題者の<a href=\"https://twitter.com/riverplus\" rel=\"nofollow noopener\" target=\"_blank\">@riverplus</a>さんによる解説が後日CodeIQMagazineあたりに公開される――はず(前例にならえば)なので、そのときに覚えていればここにリンクを張り付ける予定です。</p>\n\n<hr>\n\n<p><strong>2015/12/25追記:</strong><br>\n公開されたコードを<a href=\"http://togetter.com/li/911507\" rel=\"nofollow noopener\" target=\"_blank\">出題者の@riverplusさんみずからTogetterにまとめて下さっております</a>。この記事よりよっぽどいいコードが集まっているので、ご参考のほどを。わたしもまだまだですね(´・ω・`)</p>\n\n<hr>\n\n<hr>\n\n<p><strong>2015/12/25追記:</strong><br>\n今日二度目の追記。<a href=\"https://codeiq.jp/magazine/2015/12/34893/\" rel=\"nofollow noopener\" target=\"_blank\">予想通り(?)出題者による解説記事が公開されておりました。</a>わたしは今から精読します(´・ω・`)</p>\n\n<hr>\n\n<h1>\n<span id=\"提出コード\" class=\"fragment\"></span><a href=\"#%E6%8F%90%E5%87%BA%E3%82%B3%E3%83%BC%E3%83%89\"><i class=\"fa fa-link\"></i></a>提出コード</h1>\n\n<p>使用した言語はRuby。おそらく4-5回目ぐらいで全問通った記憶があります。</p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"c1\"># a + b * s(2) + c * s(3) + d * s(5) + e * s(6) + f * s(10) + g * s(15) + h * s(30)</span>\n<span class=\"c1\"># ただしa,b,c,d,e,f,g,hはすべて0以上の整数。</span>\n<span class=\"k\">class</span> <span class=\"nc\">H</span>\n\n    <span class=\"vc\">@@BIG</span> <span class=\"o\">=</span> <span class=\"mi\">10</span> <span class=\"o\">**</span> <span class=\"mi\">7</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">initialize</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">e</span><span class=\"p\">,</span> <span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"n\">g</span><span class=\"p\">,</span> <span class=\"n\">h</span><span class=\"p\">)</span>\n        <span class=\"vi\">@a</span><span class=\"p\">,</span> <span class=\"vi\">@b</span><span class=\"p\">,</span> <span class=\"vi\">@c</span><span class=\"p\">,</span> <span class=\"vi\">@d</span><span class=\"p\">,</span> <span class=\"vi\">@e</span><span class=\"p\">,</span> <span class=\"vi\">@f</span><span class=\"p\">,</span> <span class=\"vi\">@g</span><span class=\"p\">,</span> <span class=\"vi\">@h</span> <span class=\"o\">=</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">,</span> <span class=\"n\">c</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">e</span><span class=\"p\">,</span> <span class=\"n\">f</span><span class=\"p\">,</span> <span class=\"n\">g</span><span class=\"p\">,</span> <span class=\"n\">h</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"nb\">attr_accessor</span> <span class=\"ss\">:a</span><span class=\"p\">,</span> <span class=\"ss\">:b</span><span class=\"p\">,</span> <span class=\"ss\">:c</span><span class=\"p\">,</span> <span class=\"ss\">:d</span><span class=\"p\">,</span> <span class=\"ss\">:e</span><span class=\"p\">,</span> <span class=\"ss\">:f</span><span class=\"p\">,</span> <span class=\"ss\">:g</span><span class=\"p\">,</span> <span class=\"ss\">:h</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">*</span><span class=\"p\">(</span><span class=\"n\">other</span><span class=\"p\">)</span>\n        <span class=\"no\">H</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span>\n            <span class=\"p\">(</span><span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">6</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">10</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">15</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">30</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">15</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">15</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">10</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">10</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">6</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">6</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">5</span> <span class=\"o\">*</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">3</span> <span class=\"o\">*</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"mi\">2</span> <span class=\"o\">*</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n            <span class=\"p\">(</span><span class=\"vi\">@h</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">a</span> <span class=\"o\">+</span> <span class=\"vi\">@g</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">b</span> <span class=\"o\">+</span> <span class=\"vi\">@f</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">c</span> <span class=\"o\">+</span> <span class=\"vi\">@e</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">d</span> <span class=\"o\">+</span> <span class=\"vi\">@d</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">e</span> <span class=\"o\">+</span> <span class=\"vi\">@c</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">f</span> <span class=\"o\">+</span> <span class=\"vi\">@b</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">g</span> <span class=\"o\">+</span> <span class=\"vi\">@a</span> <span class=\"o\">*</span> <span class=\"n\">other</span><span class=\"p\">.</span><span class=\"nf\">h</span><span class=\"p\">)</span> <span class=\"o\">%</span> <span class=\"vc\">@@BIG</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span>\n    <span class=\"k\">end</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">**</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"no\">H</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">n</span> <span class=\"o\">==</span> <span class=\"mi\">0</span>\n        <span class=\"n\">n</span><span class=\"p\">.</span><span class=\"nf\">odd?</span> <span class=\"p\">?</span> <span class=\"nb\">self</span> <span class=\"o\">**</span> <span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"o\">*</span> <span class=\"nb\">self</span> <span class=\"p\">:</span> <span class=\"p\">(</span><span class=\"nb\">self</span> <span class=\"o\">*</span> <span class=\"nb\">self</span><span class=\"p\">)</span> <span class=\"o\">**</span> <span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">/</span> <span class=\"mi\">2</span><span class=\"p\">)</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"c1\"># == main ==</span>\n<span class=\"n\">h</span> <span class=\"o\">=</span> <span class=\"no\">H</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n<span class=\"n\">n</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span>\n<span class=\"nb\">p</span> <span class=\"p\">(</span><span class=\"n\">h</span> <span class=\"o\">**</span> <span class=\"n\">n</span><span class=\"p\">).</span><span class=\"nf\">a</span>\n</pre></div></div>\n\n<h1>\n<span id=\"反省会\" class=\"fragment\"></span><a href=\"#%E5%8F%8D%E7%9C%81%E4%BC%9A\"><i class=\"fa fa-link\"></i></a>反省会</h1>\n\n<p>問題の内容はおおざっぱに言うと「$1 + \\sqrt{2} + \\sqrt{3} + \\sqrt{5}$のべき乗を求めよ」というもので、これはかならず次のようになるはずです(ただしa, b, c, d, e, f, g, hはすべて0以上の整数)。</p>\n\n<div class=\"code-frame\" data-lang=\"math\"><div class=\"highlight\"><pre>H=a+b\\sqrt{2}+c\\sqrt{3}+d\\sqrt{5}+e\\sqrt{6}+f\\sqrt{10}+g\\sqrt{15}+h\\sqrt{30}\n</pre></div></div>\n\n<p>あとはもう明らかですよね。「Hのようなもの」どうしの掛け算がどのように展開されるかが分かれば当然掛け算が定義でき、掛け算が定義できればいうまでもなくべき乗は定義できるということになります。</p>\n\n<p>――が、こういう解法は非推奨というか、はっきりいえば「だめ」でしょう。まずもってスマートではない。おそらく行列計算とか多項定理とかあるいは規則性とかを利用するのでしょうが、筆者はさっぱり思い浮かばず、強引な手法で解いてしまいました。まあ一応こういう解き方もできるよというサンプル程度に。</p>\n\n<p>(ちなみに展開は紙に書いて行ったのですが、すごい時間がかかりました。しかもそれを間違いなくソースコードに写し取るのにも時間がとられ、結局1時間以上かかった記憶があります……)</p>\n\n<p>注意としては「オーバーフローに気を付けろ」。最初はC言語で実装していたのですが――まず<code>int</code>でだめ、次に<code>long</code>でもだめで、思考停止の<code>unsigned long long int</code>でもオーバーフローを起こし、心が折れてしまいました(´・ω・`)。そしてRubyで実装提出し、無事合格になったのでした。動的言語万歳! ただし7桁の整数を掛け合わせて、それを最大8つも足し合わせるような計算をするので、オーバーフローするのは当たり前といえば当たり前ですが……。</p>\n","body":"# 「『ルート・パワー』問題」とは\n\n[CodeIQ「『ルート・パワー』問題」](https://codeiq.jp/q/1563)の掲載期間が終わり、提出コードを公開してよいとのことなので、その流れに乗りたいと思います。問題の内容や出題者の[@riverplus](https://twitter.com/riverplus)さんによる解説が後日CodeIQMagazineあたりに公開される――はず(前例にならえば)なので、そのときに覚えていればここにリンクを張り付ける予定です。\n\n***\n__2015/12/25追記:__\n公開されたコードを[出題者の@riverplusさんみずからTogetterにまとめて下さっております](http://togetter.com/li/911507)。この記事よりよっぽどいいコードが集まっているので、ご参考のほどを。わたしもまだまだですね(´・ω・`)\n***\n\n***\n__2015/12/25追記:__\n今日二度目の追記。[予想通り(?)出題者による解説記事が公開されておりました。](https://codeiq.jp/magazine/2015/12/34893/)わたしは今から精読します(´・ω・`)\n***\n\n# 提出コード\n使用した言語はRuby。おそらく4-5回目ぐらいで全問通った記憶があります。\n\n```rb\n# a + b * s(2) + c * s(3) + d * s(5) + e * s(6) + f * s(10) + g * s(15) + h * s(30)\n# ただしa,b,c,d,e,f,g,hはすべて0以上の整数。\nclass H\n\n\t@@BIG = 10 ** 7\n\n\tdef initialize(a, b, c, d, e, f, g, h)\n\t\t@a, @b, @c, @d, @e, @f, @g, @h = a, b, c, d, e, f, g, h\n\tend\n\n\tattr_accessor :a, :b, :c, :d, :e, :f, :g, :h\n\n\tdef *(other)\n\t\tH.new(\n\t\t\t(@a * other.a + 2 * @b * other.b + 3 * @c * other.c + 5 * @d * other.d + 6 * @e * other.e + 10 * @f * other.f + 15 * @g * other.g + 30 * @h * other.h) % @@BIG,\n\t\t\t(@a * other.b + @b * other.a + 3 * @e * other.c + 5 * @f * other.d + 3 * @c * other.e + 5 * @d * other.f + 15 * @h * other.g + 15 * @g * other.h) % @@BIG,\n\t\t\t(@c * other.a + 2 * @e * other.b + @a * other.c + 5 * @g * other.d + 2 * @b * other.e + 10 * @h * other.f + 5 * @d * other.g + 10 * @f * other.h) % @@BIG,\n\t\t\t(@d * other.a + 2 * @f * other.b + 3 * @g * other.c + @a * other.d + 6 * @h * other.e + 2 * @b * other.f + 3 * @c * other.g + 6 * @e * other.h) % @@BIG,\n\t\t\t(@e * other.a + @c * other.b + @b * other.c + 5 * @h * other.d + @a * other.e + 5 * @g * other.f + 5 * @f * other.g + 5 * @d * other.h) % @@BIG,\n\t\t\t(@f * other.a + @d * other.b + 3 * @h * other.c + @b * other.d + 3 * @g * other.e + @a * other.f + 3 * @e * other.g + 3 * @c * other.h) % @@BIG,\n\t\t\t(@g * other.a + 2 * @h * other.b + @d * other.c + @c * other.d + 2 * @f * other.e + 2 * @e * other.f + @a * other.g + 2 * @b * other.h) % @@BIG,\n\t\t\t(@h * other.a + @g * other.b + @f * other.c + @e * other.d + @d * other.e + @c * other.f + @b * other.g + @a * other.h) % @@BIG,\n\t\t)\n\tend\n\n\tdef **(n)\n\t\treturn H.new(1, 0, 0, 0, 0, 0, 0, 0) if n == 0\n\t\tn.odd? ? self ** (n - 1) * self : (self * self) ** (n / 2)\n\tend\nend\n\n# == main ==\nh = H.new(1, 1, 1, 1, 0, 0, 0, 0)\nn = gets.to_i\np (h ** n).a\n```\n\n# 反省会\n\n問題の内容はおおざっぱに言うと「$1 + \\sqrt{2} + \\sqrt{3} + \\sqrt{5}$のべき乗を求めよ」というもので、これはかならず次のようになるはずです(ただしa, b, c, d, e, f, g, hはすべて0以上の整数)。\n\n```math\nH=a+b\\sqrt{2}+c\\sqrt{3}+d\\sqrt{5}+e\\sqrt{6}+f\\sqrt{10}+g\\sqrt{15}+h\\sqrt{30}\n```\n\nあとはもう明らかですよね。「Hのようなもの」どうしの掛け算がどのように展開されるかが分かれば当然掛け算が定義でき、掛け算が定義できればいうまでもなくべき乗は定義できるということになります。\n\n――が、こういう解法は非推奨というか、はっきりいえば「だめ」でしょう。まずもってスマートではない。おそらく行列計算とか多項定理とかあるいは規則性とかを利用するのでしょうが、筆者はさっぱり思い浮かばず、強引な手法で解いてしまいました。まあ一応こういう解き方もできるよというサンプル程度に。\n\n(ちなみに展開は紙に書いて行ったのですが、すごい時間がかかりました。しかもそれを間違いなくソースコードに写し取るのにも時間がとられ、結局1時間以上かかった記憶があります……)\n\n注意としては「オーバーフローに気を付けろ」。最初はC言語で実装していたのですが――まず`int`でだめ、次に`long`でもだめで、思考停止の`unsigned long long int`でもオーバーフローを起こし、心が折れてしまいました(´・ω・`)。そしてRubyで実装提出し、無事合格になったのでした。動的言語万歳! ただし7桁の整数を掛け合わせて、それを最大8つも足し合わせるような計算をするので、オーバーフローするのは当たり前といえば当たり前ですが……。\n\n\n","coediting":false,"comments_count":0,"created_at":"2015-12-24T11:25:07+09:00","group":null,"id":"5f44222639f44d55310a","likes_count":3,"private":false,"reactions_count":0,"tags":[{"name":"Ruby","versions":[]},{"name":"codeiq","versions":[]}],"title":"CodeIQ「『ルート・パワー』問題」に参加しました。","updated_at":"2015-12-25T22:49:25+09:00","url":"https://qiita.com/neko_the_shadow/items/5f44222639f44d55310a","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":33,"github_login_name":null,"id":"neko_the_shadow","items_count":169,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null}