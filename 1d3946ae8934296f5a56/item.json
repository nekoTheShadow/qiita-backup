{"rendered_body":"<p><a href=\"https://codeiq.jp/q/3459\" rel=\"nofollow noopener\" target=\"_blank\">CodeIQ「『タワー・ビルディング』問題」</a>の公開期間が終了したということで、提出回答(Ruby)を共有したいと思います(´・ω・｀) 詳しい問題内容については後日、CodeIQ Magazineで解説とともに公開されると思うので、そちらを参照お願いします(権利関係とかがよくわからないので)。</p>\n\n<p><strong>2018-01-11追記:</strong> 問題&amp;解説がCodeIQMagazineで公開されていました!! <a href=\"https://codeiq.jp/magazine/2018/01/56722/\" rel=\"nofollow noopener\" target=\"_blank\">「数学の問題をプログラミングで解こう！「『タワー・ビルディング』問題解説 」</a></p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><code><span class=\"vi\">@cache</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">f</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">)</span>\n  <span class=\"n\">ky</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">]</span>\n  <span class=\"k\">return</span> <span class=\"vi\">@cache</span><span class=\"p\">[</span><span class=\"n\">ky</span><span class=\"p\">]</span> <span class=\"k\">if</span> <span class=\"vi\">@cache</span><span class=\"p\">.</span><span class=\"nf\">key?</span><span class=\"p\">(</span><span class=\"n\">ky</span><span class=\"p\">)</span>\n\n  <span class=\"k\">if</span> <span class=\"n\">a</span> <span class=\"o\">&lt;</span> <span class=\"mi\">0</span> <span class=\"o\">||</span> <span class=\"n\">b</span> <span class=\"o\">&lt;</span> <span class=\"mi\">0</span> <span class=\"o\">||</span> <span class=\"n\">n</span> <span class=\"o\">&lt;</span> <span class=\"mi\">0</span>\n    <span class=\"n\">val</span> <span class=\"o\">=</span> <span class=\"mi\">0</span>\n  <span class=\"k\">elsif</span> <span class=\"n\">n</span> <span class=\"o\">==</span> <span class=\"mi\">0</span>\n    <span class=\"n\">val</span> <span class=\"o\">=</span> <span class=\"mi\">1</span>    \n  <span class=\"k\">else</span>\n    <span class=\"n\">val</span> <span class=\"o\">=</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">a</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">)</span>\n  <span class=\"k\">end</span>\n\n  <span class=\"vi\">@cache</span><span class=\"p\">[</span><span class=\"n\">ky</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"n\">val</span> <span class=\"o\">%</span> <span class=\"mi\">1000003</span> \n<span class=\"k\">end</span>\n\n<span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span> <span class=\"o\">=</span> <span class=\"no\">STDIN</span><span class=\"p\">.</span><span class=\"nf\">gets</span><span class=\"p\">.</span><span class=\"nf\">split</span><span class=\"p\">.</span><span class=\"nf\">map</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"ss\">:to_i</span><span class=\"p\">)</span>\n<span class=\"nb\">puts</span> <span class=\"n\">f</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">a</span><span class=\"p\">,</span> <span class=\"n\">b</span><span class=\"p\">)</span>\n</code></pre></div></div>\n\n<p>「高さ1の箱を最大a個、高さ2の箱を最大b個使って、高さnになる組み合わせの総数」は</p>\n\n<ul>\n<li>「高さ1の箱を最大a-1個、高さ2の箱を最大b個使って、高さn-1になる組み合わせの総数」</li>\n<li>「高さ1の箱を最大a個、高さ2の箱を最大b-1個使って、高さn-2になる組み合わせの総数」</li>\n</ul>\n\n<p>をそれぞれ足し合わせたものになります。上記の解答はこれを再帰を利用して実装しただけの単純なものになります。ただし再帰を利用するので「初期条件」と「StackOverFlow」には注意する必要があり、後者については「メモ化」(一度計算した条件を覚えておく)ことにより、その対策としています。</p>\n","body":"[CodeIQ「『タワー・ビルディング』問題」](https://codeiq.jp/q/3459)の公開期間が終了したということで、提出回答(Ruby)を共有したいと思います(´・ω・｀) 詳しい問題内容については後日、CodeIQ Magazineで解説とともに公開されると思うので、そちらを参照お願いします(権利関係とかがよくわからないので)。\n\n__2018-01-11追記:__ 問題&解説がCodeIQMagazineで公開されていました!! [「数学の問題をプログラミングで解こう！「『タワー・ビルディング』問題解説 」](https://codeiq.jp/magazine/2018/01/56722/)\n\n```rb\n@cache = {}\n\ndef f(n, a, b)\n  ky = [n, a, b]\n  return @cache[ky] if @cache.key?(ky)\n\n  if a < 0 || b < 0 || n < 0\n    val = 0\n  elsif n == 0\n    val = 1    \n  else\n    val = f(n - 1, a - 1, b) + f(n - 2, a, b - 1)\n  end\n\n  @cache[ky] = val % 1000003 \nend\n\nn, a, b = STDIN.gets.split.map(&:to_i)\nputs f(n, a, b)\n```\n\n「高さ1の箱を最大a個、高さ2の箱を最大b個使って、高さnになる組み合わせの総数」は\n\n- 「高さ1の箱を最大a-1個、高さ2の箱を最大b個使って、高さn-1になる組み合わせの総数」\n- 「高さ1の箱を最大a個、高さ2の箱を最大b-1個使って、高さn-2になる組み合わせの総数」\n\nをそれぞれ足し合わせたものになります。上記の解答はこれを再帰を利用して実装しただけの単純なものになります。ただし再帰を利用するので「初期条件」と「StackOverFlow」には注意する必要があり、後者については「メモ化」(一度計算した条件を覚えておく)ことにより、その対策としています。\n\n","coediting":false,"comments_count":0,"created_at":"2018-01-04T21:59:15+09:00","group":null,"id":"1d3946ae8934296f5a56","likes_count":1,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Ruby","versions":[]},{"name":"codeiq","versions":[]}],"title":"CodeIQ「『タワー・ビルディング』問題」に参加しました。","updated_at":"2018-01-11T22:28:55+09:00","url":"https://qiita.com/neko_the_shadow/items/1d3946ae8934296f5a56","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":210,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":999,"team_membership":null,"organization_url_name":null}