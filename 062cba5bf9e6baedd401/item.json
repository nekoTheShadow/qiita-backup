{"rendered_body":"<p>手元にあるjarファイルがどのバージョンのjavaで利用できるのかを調べるにはどうすればよいでしょうか? </p>\n\n<p>実をいうと、jarファイルそのものはビルドのバージョンを有していません。jarファイルというのはclassファイルやpropertiesファイルやそのほかファイルをアーカイブしたものにすぎません。たとえるなら、jarはtarやzipの親戚とでもいえばよいでしょうか。したがって、Javaの特定のバージョンでそのjarファイルが利用可能かどうかを調べるには、jarファイルそのもののバージョンではなく、そのjarファイルに格納されているclassファイルがどのバージョンのjavacでビルドされたのかを見てやる必要があります。</p>\n\n<p>ここでは調査方法の例として<code>commons-collections4-4.4.jar</code> (<a href=\"https://commons.apache.org/proper/commons-collections/\" rel=\"nofollow noopener\" target=\"_blank\">Apache Commons Collections v.4.4</a>) がどのバージョンから利用できるのかを調査してみます。</p>\n\n<p>まず<code>jar</code>コマンドでjarファイルの中身を取り出します。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>$ jar xf commons-collections4-4.4.jar\n</code></pre></div></div>\n\n<p>するとjarファイルに格納されていたclassファイルが複数見つかるはずです。ここではサンプルとして、<code>./org/apache/commons/collections4/ArrayStack.class</code>を利用することにします。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>$ find . -name \"*.class\"  | head -n1\n./org/apache/commons/collections4/ArrayStack.class\n</code></pre></div></div>\n\n<p><code>./org/apache/commons/collections4/ArrayStack.class</code>がどのバージョンのjavacによりビルドされたのかを調べたいわけですが、まず手っ取り早いのが<code>file</code>コマンドを利用する方法です。この場合はJava8でビルドされていることが一目瞭然ですね。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>$ file ./org/apache/commons/collections4/ArrayStack.class\n./org/apache/commons/collections4/ArrayStack.class: compiled Java class data, version 52.0 (Java 1.8)\n</code></pre></div></div>\n\n<p><code>file</code>コマンドがない環境では<code>javap</code>を利用しましょう。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>$ javap -v ./org/apache/commons/collections4/ArrayStack.class | grep major\n  major version: 52\n</code></pre></div></div>\n\n<p><code>javap</code>はclassファイルを逆アセンブルするコマンドで、<code>-v</code>オプションを付けると詳細情報が出力され、その中にバージョン情報が混ざっています。これを<code>grep</code>でより分けているわけですね。ここで表示されている<code>major version: 52</code>という値はJava8を指しています。この<code>major version</code>とJavaのバージョンの対応関係については、次のページがよくまとまっているので、参考にしてください → <a href=\"https://en.wikipedia.org/wiki/Java_class_file\" rel=\"nofollow noopener\" target=\"_blank\">Wikipedia: Java class file</a></p>\n","body":"手元にあるjarファイルがどのバージョンのjavaで利用できるのかを調べるにはどうすればよいでしょうか? \n\n実をいうと、jarファイルそのものはビルドのバージョンを有していません。jarファイルというのはclassファイルやpropertiesファイルやそのほかファイルをアーカイブしたものにすぎません。たとえるなら、jarはtarやzipの親戚とでもいえばよいでしょうか。したがって、Javaの特定のバージョンでそのjarファイルが利用可能かどうかを調べるには、jarファイルそのもののバージョンではなく、そのjarファイルに格納されているclassファイルがどのバージョンのjavacでビルドされたのかを見てやる必要があります。\n\nここでは調査方法の例として`commons-collections4-4.4.jar` ([Apache Commons Collections v.4.4](https://commons.apache.org/proper/commons-collections/)) がどのバージョンから利用できるのかを調査してみます。\n\nまず`jar`コマンドでjarファイルの中身を取り出します。\n\n```\n$ jar xf commons-collections4-4.4.jar\n```\n\nするとjarファイルに格納されていたclassファイルが複数見つかるはずです。ここではサンプルとして、`./org/apache/commons/collections4/ArrayStack.class`を利用することにします。\n\n```\n$ find . -name \"*.class\"  | head -n1\n./org/apache/commons/collections4/ArrayStack.class\n```\n\n`./org/apache/commons/collections4/ArrayStack.class`がどのバージョンのjavacによりビルドされたのかを調べたいわけですが、まず手っ取り早いのが`file`コマンドを利用する方法です。この場合はJava8でビルドされていることが一目瞭然ですね。\n\n```\n$ file ./org/apache/commons/collections4/ArrayStack.class\n./org/apache/commons/collections4/ArrayStack.class: compiled Java class data, version 52.0 (Java 1.8)\n```\n\n`file`コマンドがない環境では`javap`を利用しましょう。\n\n```\n$ javap -v ./org/apache/commons/collections4/ArrayStack.class | grep major\n  major version: 52\n```\n\n`javap`はclassファイルを逆アセンブルするコマンドで、`-v`オプションを付けると詳細情報が出力され、その中にバージョン情報が混ざっています。これを`grep`でより分けているわけですね。ここで表示されている`major version: 52`という値はJava8を指しています。この`major version`とJavaのバージョンの対応関係については、次のページがよくまとまっているので、参考にしてください → [Wikipedia: Java class file](https://en.wikipedia.org/wiki/Java_class_file)\n","coediting":false,"comments_count":0,"created_at":"2019-11-27T21:30:47+09:00","group":null,"id":"062cba5bf9e6baedd401","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"Java","versions":[]}],"title":"手元にあるjarファイルがどのバージョンのjavaで利用できるのかを調べたい","updated_at":"2019-11-27T21:30:47+09:00","url":"https://qiita.com/neko_the_shadow/items/062cba5bf9e6baedd401","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":186,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null,"team_membership":null}