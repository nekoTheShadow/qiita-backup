{"rendered_body":"<p data-sourcepos=\"1:1-1:185\">Go言語は標準ライブラリだけでzipファイルの解凍ができます。以下は<code>./example.zip</code>をカレントディレクトリに解凍するサンプルコードです。</p>\n<div class=\"code-frame\" data-lang=\"go\" data-sourcepos=\"4:1-49:3\"><div class=\"highlight\"><pre><code><span class=\"n\">zipFilePath</span> <span class=\"o\">:=</span> <span class=\"s\">\"./example.zip\"</span>\n\n<span class=\"c\">// zipファイルをOpenする。</span>\n<span class=\"n\">zr</span><span class=\"p\">,</span> <span class=\"n\">err</span> <span class=\"o\">:=</span> <span class=\"n\">zip</span><span class=\"o\">.</span><span class=\"n\">OpenReader</span><span class=\"p\">(</span><span class=\"n\">zipFilePath</span><span class=\"p\">)</span>\n<span class=\"k\">if</span> <span class=\"n\">err</span> <span class=\"o\">!=</span> <span class=\"no\">nil</span> <span class=\"p\">{</span>\n\t<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">Fatal</span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span>\n<span class=\"p\">}</span>\n<span class=\"k\">defer</span> <span class=\"n\">zr</span><span class=\"o\">.</span><span class=\"n\">Close</span><span class=\"p\">()</span>\n\n<span class=\"k\">for</span> <span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">zf</span> <span class=\"o\">:=</span> <span class=\"k\">range</span> <span class=\"n\">zr</span><span class=\"o\">.</span><span class=\"n\">File</span> <span class=\"p\">{</span>\n\t<span class=\"c\">// 解凍先のディレクトリを作成する。</span>\n\t<span class=\"c\">// 圧縮されているエントリがディレクトリの場合はそのディレクトリを</span>\n\t<span class=\"c\">// ファイルの場合はそのファイルを格納しているディレクトリをそれぞれ作成する。</span>\n\t<span class=\"k\">var</span> <span class=\"n\">dirPath</span> <span class=\"kt\">string</span>\n\t<span class=\"k\">if</span> <span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">FileInfo</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">IsDir</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\t\t<span class=\"n\">dirPath</span> <span class=\"o\">=</span> <span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">Name</span>\n\t<span class=\"p\">}</span> <span class=\"k\">else</span> <span class=\"p\">{</span>\n\t\t<span class=\"n\">dirPath</span> <span class=\"o\">=</span> <span class=\"n\">path</span><span class=\"o\">.</span><span class=\"n\">Dir</span><span class=\"p\">(</span><span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">Name</span><span class=\"p\">)</span>\n\t<span class=\"p\">}</span>\n\t<span class=\"k\">if</span> <span class=\"n\">err</span> <span class=\"o\">:=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">MkdirAll</span><span class=\"p\">(</span><span class=\"n\">dirPath</span><span class=\"p\">,</span> <span class=\"m\">750</span><span class=\"p\">);</span> <span class=\"n\">err</span> <span class=\"o\">!=</span> <span class=\"no\">nil</span> <span class=\"p\">{</span>\n\t\t<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">Fatal</span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span>\n\t<span class=\"p\">}</span>\n\n\t<span class=\"k\">if</span> <span class=\"o\">!</span><span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">FileInfo</span><span class=\"p\">()</span><span class=\"o\">.</span><span class=\"n\">IsDir</span><span class=\"p\">()</span> <span class=\"p\">{</span>\n\t\t<span class=\"c\">// 圧縮されているエントリがファイルの場合、そのファイルをオープンする</span>\n\t\t<span class=\"n\">src</span><span class=\"p\">,</span> <span class=\"n\">err</span> <span class=\"o\">:=</span> <span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">Open</span><span class=\"p\">()</span>\n\t\t<span class=\"k\">if</span> <span class=\"n\">err</span> <span class=\"o\">!=</span> <span class=\"no\">nil</span> <span class=\"p\">{</span>\n\t\t\t<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">Fatal</span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span>\n\t\t<span class=\"p\">}</span>\n\t\t<span class=\"k\">defer</span> <span class=\"n\">src</span><span class=\"o\">.</span><span class=\"n\">Close</span><span class=\"p\">()</span>\n\n\t\t<span class=\"c\">// 解凍先のファイルを作成する。</span>\n\t\t<span class=\"n\">dst</span><span class=\"p\">,</span> <span class=\"n\">err</span> <span class=\"o\">:=</span> <span class=\"n\">os</span><span class=\"o\">.</span><span class=\"n\">Create</span><span class=\"p\">(</span><span class=\"n\">zf</span><span class=\"o\">.</span><span class=\"n\">Name</span><span class=\"p\">)</span>\n\t\t<span class=\"k\">if</span> <span class=\"n\">err</span> <span class=\"o\">!=</span> <span class=\"no\">nil</span> <span class=\"p\">{</span>\n\t\t\t<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">Fatal</span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span>\n\t\t<span class=\"p\">}</span>\n\t\t<span class=\"k\">defer</span> <span class=\"n\">dst</span><span class=\"o\">.</span><span class=\"n\">Close</span><span class=\"p\">()</span>\n\n\t\t<span class=\"c\">// 圧縮されているファイルの内容を解凍先のファイルに書き込む</span>\n\t\t<span class=\"k\">if</span> <span class=\"n\">_</span><span class=\"p\">,</span> <span class=\"n\">err</span> <span class=\"o\">:=</span> <span class=\"n\">io</span><span class=\"o\">.</span><span class=\"n\">Copy</span><span class=\"p\">(</span><span class=\"n\">dst</span><span class=\"p\">,</span> <span class=\"n\">src</span><span class=\"p\">);</span> <span class=\"n\">err</span> <span class=\"o\">!=</span> <span class=\"no\">nil</span> <span class=\"p\">{</span>\n\t\t\t<span class=\"n\">log</span><span class=\"o\">.</span><span class=\"n\">Fatal</span><span class=\"p\">(</span><span class=\"n\">err</span><span class=\"p\">)</span>\n\t\t<span class=\"p\">}</span>\n\t<span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div></div>\n<p data-sourcepos=\"51:1-51:17\"><strong>環境情報:</strong></p>\n<div class=\"code-frame\" data-lang=\"text\" data-sourcepos=\"53:1-56:3\"><div class=\"highlight\"><pre><code>~$ go version\ngo version go1.20.3 linux/amd64\n</code></pre></div></div>\n","body":"Go言語は標準ライブラリだけでzipファイルの解凍ができます。以下は`./example.zip`をカレントディレクトリに解凍するサンプルコードです。\n\n\n```go\nzipFilePath := \"./example.zip\"\n\n// zipファイルをOpenする。\nzr, err := zip.OpenReader(zipFilePath)\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer zr.Close()\n\nfor _, zf := range zr.File {\n\t// 解凍先のディレクトリを作成する。\n\t// 圧縮されているエントリがディレクトリの場合はそのディレクトリを\n\t// ファイルの場合はそのファイルを格納しているディレクトリをそれぞれ作成する。\n\tvar dirPath string\n\tif zf.FileInfo().IsDir() {\n\t\tdirPath = zf.Name\n\t} else {\n\t\tdirPath = path.Dir(zf.Name)\n\t}\n\tif err := os.MkdirAll(dirPath, 750); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tif !zf.FileInfo().IsDir() {\n\t\t// 圧縮されているエントリがファイルの場合、そのファイルをオープンする\n\t\tsrc, err := zf.Open()\n\t\tif err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t\tdefer src.Close()\n\n\t\t// 解凍先のファイルを作成する。\n\t\tdst, err := os.Create(zf.Name)\n\t\tif err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t\tdefer dst.Close()\n\n\t\t// 圧縮されているファイルの内容を解凍先のファイルに書き込む\n\t\tif _, err := io.Copy(dst, src); err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t}\n}\n```\n\n__環境情報:__\n\n```\n~$ go version\ngo version go1.20.3 linux/amd64\n```\n","coediting":false,"comments_count":0,"created_at":"2023-05-05T23:43:59+09:00","group":null,"id":"48cf92ea0f1b181b29c8","likes_count":0,"private":false,"reactions_count":0,"stocks_count":0,"tags":[{"name":"Go","versions":[]}],"title":"Go言語でzipファイルを解凍したい","updated_at":"2023-05-05T23:43:59+09:00","url":"https://qiita.com/neko_the_shadow/items/48cf92ea0f1b181b29c8","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":37,"github_login_name":"nekoTheShadow","id":"neko_the_shadow","items_count":218,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://github.com/nekoTheShadow"},"page_views_count":600,"team_membership":null,"organization_url_name":null,"slide":false}