{"rendered_body":"<p>クライアントからデータが多重送信されることを防止するため、submitボタンを押下した瞬間にそのボタン自体を押下不能にすることを考えます。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;form</span> <span class=\"na\">id=</span><span class=\"s\">'form'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">'submit'</span> <span class=\"na\">id=</span><span class=\"s\">'submit'</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/form&gt;</span>\n\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"kd\">let</span> <span class=\"nx\">submit</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">submit</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"nx\">submit</span><span class=\"p\">.</span><span class=\"nx\">addEventListener</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">click</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nx\">evt</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"nx\">submit</span><span class=\"p\">.</span><span class=\"nx\">disabled</span> <span class=\"o\">=</span> <span class=\"kc\">true</span><span class=\"p\">;</span>\n<span class=\"p\">},</span> <span class=\"kc\">false</span><span class=\"p\">);</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div></div>\n\n<p>Google Chromeだと上記のコードは想定通りに動作しません。つまりフォームデータ自体がサーバに送信されなくなってしまいます(´・ω・｀) ネットワークコンソールを見ている限りだと、submitイベントが中断されているような挙動を示していたのですが、詳細は不明(フロントエンドマンわからないマンの限界)。なおFireFoxとMicrosoft Edgeでは正常に動作したので、Chrome特有の仕様・挙動の可能性があります。</p>\n\n<p>「Chromeだけ動かない」事象だったので、デバッグには苦労したのですが、とりあえず以下のように書き換えることで、同様の機能を実装することができました。なおこのコードはChrome,FireFox,Edgeすべてで正常に動作しました。</p>\n\n<div class=\"code-frame\" data-lang=\"html\"><div class=\"highlight\"><pre><code><span class=\"nt\">&lt;form</span> <span class=\"na\">id=</span><span class=\"s\">'form'</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;input</span> <span class=\"na\">type=</span><span class=\"s\">'submit'</span> <span class=\"na\">id=</span><span class=\"s\">'submit'</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/form&gt;</span>\n\n<span class=\"nt\">&lt;script&gt;</span>\n<span class=\"kd\">let</span> <span class=\"nx\">form</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">form</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n<span class=\"nx\">form</span><span class=\"p\">.</span><span class=\"nx\">addEventListener</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">submit</span><span class=\"dl\">'</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nx\">evt</span><span class=\"p\">)</span> <span class=\"o\">=&gt;</span> <span class=\"p\">{</span>\n  <span class=\"kd\">let</span> <span class=\"nx\">submit</span> <span class=\"o\">=</span> <span class=\"nb\">document</span><span class=\"p\">.</span><span class=\"nx\">getElementById</span><span class=\"p\">(</span><span class=\"dl\">'</span><span class=\"s1\">submit</span><span class=\"dl\">'</span><span class=\"p\">);</span>\n  <span class=\"nx\">submit</span><span class=\"p\">.</span><span class=\"nx\">disabled</span> <span class=\"o\">=</span> <span class=\"kc\">true</span><span class=\"p\">;</span>\n<span class=\"p\">},</span> <span class=\"kc\">false</span><span class=\"p\">);</span>\n<span class=\"nt\">&lt;/script&gt;</span>\n</code></pre></div></div>\n","body":"クライアントからデータが多重送信されることを防止するため、submitボタンを押下した瞬間にそのボタン自体を押下不能にすることを考えます。\n\n```html\n<form id='form'>\n  <input type='submit' id='submit' />\n</form>\n\n<script>\nlet submit = document.getElementById('submit');\nsubmit.addEventListener('click', (evt) => {\n  submit.disabled = true;\n}, false);\n</script>\n```\n\nGoogle Chromeだと上記のコードは想定通りに動作しません。つまりフォームデータ自体がサーバに送信されなくなってしまいます(´・ω・｀) ネットワークコンソールを見ている限りだと、submitイベントが中断されているような挙動を示していたのですが、詳細は不明(フロントエンドマンわからないマンの限界)。なおFireFoxとMicrosoft Edgeでは正常に動作したので、Chrome特有の仕様・挙動の可能性があります。\n\n「Chromeだけ動かない」事象だったので、デバッグには苦労したのですが、とりあえず以下のように書き換えることで、同様の機能を実装することができました。なおこのコードはChrome,FireFox,Edgeすべてで正常に動作しました。\n\n```html\n<form id='form'>\n  <input type='submit' id='submit' />\n</form>\n\n<script>\nlet form = document.getElementById('form');\nform.addEventListener('submit', (evt) => {\n  let submit = document.getElementById('submit');\n  submit.disabled = true;\n}, false);\n</script>\n```\n","coediting":false,"comments_count":0,"created_at":"2018-04-01T23:15:33+09:00","group":null,"id":"1e828a05621aaa3539b1","likes_count":17,"private":false,"reactions_count":0,"tags":[{"name":"JavaScript","versions":[]},{"name":"Chrome","versions":[]}],"title":"Chromeの場合、submitボタン押下時にボタンをdisabledにすると、フォームデータが送信されない。","updated_at":"2018-04-01T23:15:33+09:00","url":"https://qiita.com/neko_the_shadow/items/1e828a05621aaa3539b1","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":36,"github_login_name":null,"id":"neko_the_shadow","items_count":198,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null,"team_membership":null}