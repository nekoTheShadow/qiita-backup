<!doctype html><html lang=en itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>CentOS7.4でDockerをインストール(おまけでDb2 Express-CをDockerで試してみる) - Qiita Backup</title><meta name=description content="注意:本記事は以下の環境により動作確認をしています。 ゲストOS CentOS Linux release 7.4.1708 (Core) ホストOS Windows 10 仮想化ソフト VMware Workstation 14 Player 2018年の正月はC#の勉強をする"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Qiita Backup","url":"https:\/\/nekotheshadow.github.io\/qiita-backup"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/nekotheshadow.github.io\/qiita-backup"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/nekotheshadow.github.io\/qiita-backup","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/nekotheshadow.github.io\/qiita-backup\/blog\/24c6fa305e2b56f339ea\/","name":"Cent o s7.4で dockerをインストール(おまけで db2 express cを dockerで試してみる)"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":""},"headline":"CentOS7.4でDockerをインストール(おまけでDb2 Express-CをDockerで試してみる)","description":"注意:本記事は以下の環境により動作確認をしています。 ゲストOS CentOS Linux release 7.4.1708 (Core) ホストOS Windows 10 仮想化ソフト VMware Workstation 14 Player 2018年の正月はC#の勉強をする","inLanguage":"en","wordCount":1298,"datePublished":"2018-01-03T18:04:49","dateModified":"2018-01-03T18:04:49","image":"https:\/\/nekotheshadow.github.io\/qiita-backup","keywords":["CentOS, vmware, db2, Docker"],"mainEntityOfPage":"https:\/\/nekotheshadow.github.io\/qiita-backup\/blog\/24c6fa305e2b56f339ea\/","publisher":{"@type":"Organization","name":"https:\/\/nekotheshadow.github.io\/qiita-backup","logo":{"@type":"ImageObject","url":"https:\/\/nekotheshadow.github.io\/qiita-backup","height":60,"width":60}}}</script><meta property="og:title" content="CentOS7.4でDockerをインストール(おまけでDb2 Express-CをDockerで試してみる)"><meta property="og:description" content="注意:本記事は以下の環境により動作確認をしています。 ゲストOS CentOS Linux release 7.4.1708 (Core) ホストOS Windows 10 仮想化ソフト VMware Workstation 14 Player 2018年の正月はC#の勉強をする"><meta property="og:url" content="https://nekotheshadow.github.io/qiita-backup/blog/24c6fa305e2b56f339ea/"><meta property="og:type" content="website"><meta property="og:site_name" content="Qiita Backup"><meta name=twitter:title content="CentOS7.4でDockerをインストール(おまけでDb2 Express-CをDockerで試してみる)"><meta name=twitter:description content="注意:本記事は以下の環境により動作確認をしています。 ゲストOS CentOS Linux release 7.4.1708 (Core) ホストOS Windows 10 仮想化ソフト VMware Workstation 14 Player 2018年の正月はC#の勉強をする"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><link rel=alternate href=https://nekotheshadow.github.io/qiita-backup/index.xml type=application/rss+xml title="Qiita Backup"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://nekotheshadow.github.io/qiita-backup/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://nekotheshadow.github.io/qiita-backup/css/syntax.css><link rel=stylesheet href=https://nekotheshadow.github.io/qiita-backup/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=https://nekotheshadow.github.io/qiita-backup>Qiita Backup</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"></ul></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=blog-heading><h1>CentOS7.4でDockerをインストール(おまけでDb2 Express-CをDockerで試してみる)</h1><hr class=small></div></div></div></div></div></header><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>注意:本記事は以下の環境により動作確認をしています。</p><table><thead><tr><th align=center></th><th></th></tr></thead><tbody><tr><td align=center>ゲストOS</td><td align=center>CentOS Linux release 7.4.1708 (Core)</td></tr><tr><td align=center>ホストOS</td><td align=center>Windows 10</td></tr><tr><td align=center>仮想化ソフト</td><td align=center>VMware Workstation 14 Player</td></tr></tbody></table><hr><p>2018年の正月はC#の勉強をするつもりでいたのですが、なぜかDockerを触っていました(´・ω・｀) どうしてこうなった(´・ω・｀)</p><p>それはさておきCentOS7.4でDockerをインストールした際のメモを共有します。といっても<a href=https://docs.docker.com/engine/installation/linux/docker-ce/centos/#install-docker-ce-1>Docker公式</a>の指示通り、進めていくだけ。それを読むことすら面倒というものぐさな人は以下のコマンドを順番にたたいていくだけで、Docker環境が構築できます(もちろんrootユーザで実行するか、すべてのコマンドにsudoを付与する必要があります)。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum remove docker docker-common docker-selinux docker-engine
yum install -y yum-utils device-mapper-persistent-data lvm2
yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
yum install docker-ce
</code></pre></div><p>この時点でDockerが停止している場合は、以下のコマンドによりサービスを活性化させましょう。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>systemctl start docker.service
</code></pre></div><p>ちなみにDockerが正常に活性化したかどうかは以下のコマンドで確認することができます。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>systemctl status docker
</code></pre></div><hr><p>せっかくDocker環境を構築したので、Docker Imageをインストールしてみたいと思います。今回練習に利用するのがDb2 Express-C。IBMが誇るRDBMSの無償版ですね。IBMが公式でDocker Imageを用意してくれているので、これを利用します。といっても<a href=https://hub.docker.com/r/ibmcom/db2express-c/>Docker Hubの当該ページのREADME</a>に指示されている通りにコマンドをたたくだけ。それを読むことすら面倒というものぐさな人(2回目)はまず<code>docker pull</code>コマンドによりimageをインストールします。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker pull ibmcom/db2express-c
</code></pre></div><p>インストール後は<code>docker run</code>コマンドでコンテナを起動します。このとき環境変数<code>DB2INST1_PASSWORD</code>は自分のわかりやすいものを設定してください。その名前の通り<code>db2inst1</code>ユーザのパスワードになります。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker run -it -p 50000:50000 -e DB2INST1_PASSWORD<span style=color:#f92672>=</span>db2inst1passw0rd -e LICENSE<span style=color:#f92672>=</span>accept ibmcom/db2express-c:latest bash
</code></pre></div><p>この<code>docker run</code>コマンドが正常終了すると「db2がインストールされたOSのターミナルに接続している」ような状態になります。そこで<code>ibmcom/db2express-c</code>が用意しているインスタンスユーザ(db2inst1)でログインした後、インスタンスを活性化。サンプルDBを作成&接続し、作成されたテーブルの中身をのぞいてみましょう。</p><pre><code>su - db2inst1
db2start
db2sampl
db2 connect to sample
db2 &quot;select * from db2inst1.org&quot;
</code></pre><p>すると以下のような内容がターミナルに表示されているはずです。</p><pre><code>DEPTNUMB DEPTNAME       MANAGER DIVISION   LOCATION     
-------- -------------- ------- ---------- -------------
      10 Head Office        160 Corporate  New York     
      15 New England         50 Eastern    Boston       
      20 Mid Atlantic        10 Eastern    Washington   
      38 South Atlantic      30 Eastern    Atlanta      
      42 Great Lakes        100 Midwest    Chicago      
      51 Plains             140 Midwest    Dallas       
      66 Pacific            270 Western    San Francisco
      84 Mountain           290 Western    Denver       

  8 record(s) selected.
</code></pre><hr><p>余談:<a href=https://hub.docker.com/r/ibmcom/db2express-c/>前述したibmcom/db2express-cのDocker HubのREADME</a>によると、Db2は<code>/opt/ibm/db2/V10.5</code>というディレクトリにインストールされているそうなのですが――どう考えても見当たらない(´・ω・｀)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>[</span>db2inst1@a7c227901722 ~<span style=color:#f92672>]</span>$ ls -la /opt/
total <span style=color:#ae81ff>0</span>
drwxr-xr-x. <span style=color:#ae81ff>2</span> root root  <span style=color:#ae81ff>6</span> Jun <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>2014</span> .
drwxr-xr-x. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>51</span> Jan  <span style=color:#ae81ff>3</span> 08:36 ..
</code></pre></div><p>また2018-01-03現在、Db2の最新版は11.1ですが、今回利用したImageで利用できるのは10.5。ちょっと古い(´・ω・｀) IBM/Db2ちゃんはDockerには塩対応なのかしら(´・ω・｀)</p><div class=blog-tags><a href=https://nekotheshadow.github.io/qiita-backup/tags/centos/>CentOS</a>&nbsp;
<a href=https://nekotheshadow.github.io/qiita-backup/tags/vmware/>vmware</a>&nbsp;
<a href=https://nekotheshadow.github.io/qiita-backup/tags/db2/>db2</a>&nbsp;
<a href=https://nekotheshadow.github.io/qiita-backup/tags/docker/>Docker</a>&nbsp;</div></article><ul class="pager blog-pager"><li class=previous><a href=https://nekotheshadow.github.io/qiita-backup/blog/1808d4652c8bd542a8de/ data-toggle=tooltip data-placement=top title=ゲストのCentOS7からインターネット接続する方法(NAT)>&larr; Previous Post</a></li><li class=next><a href=https://nekotheshadow.github.io/qiita-backup/blog/1d3946ae8934296f5a56/ data-toggle=tooltip data-placement=top title=CodeIQ「『タワー・ビルディング』問題」に参加しました。>Next Post &rarr;</a></li></ul></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"></ul><p class="credits copyright text-muted">&nbsp;&bull;&nbsp;&copy;
2022
&nbsp;&bull;&nbsp;
<a href=https://nekotheshadow.github.io/qiita-backup>Qiita Backup</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.74.3</a> powered &nbsp;&bull;&nbsp; Theme <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adapted from <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script><script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script><script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script><script src=https://nekotheshadow.github.io/qiita-backup/js/main.js></script><script>renderMathInElement(document.body);</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://nekotheshadow.github.io/qiita-backup/js/load-photoswipe.js></script></body></html>