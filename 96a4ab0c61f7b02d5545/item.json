{"rendered_body":"\n<h1>\n<span id=\"はじめに\" class=\"fragment\"></span><a href=\"#%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB\"><i class=\"fa fa-link\"></i></a>はじめに</h1>\n\n<p>「<code>java.util.logging</code>(以降は<code>JUL</code>と表記)を利用して、MyBatisが発行したSQLの実行ログを記録する」という、意外に珍しいことに取り組んだので、その際の手順を簡単に残しておきたいと思います。結構長い記事ですが、<code>logging.properties</code>の設定が最大の肝になるはずです。</p>\n\n<h1>\n<span id=\"注意\" class=\"fragment\"></span><a href=\"#%E6%B3%A8%E6%84%8F\"><i class=\"fa fa-link\"></i></a>注意</h1>\n\n<p>この記事は以下の環境で、稼働確認を行いましたが、バージョンやミドルウェアが異なる環境でも、動作すると思います。</p>\n\n<ul>\n<li>Postgres 10.5</li>\n<li>Java 11</li>\n<li>MyBatis 3.5.1</li>\n<li>Postgres JDBC 42.2.5</li>\n</ul>\n\n<h1>\n<span id=\"事前準備-postgres\" class=\"fragment\"></span><a href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99-postgres\"><i class=\"fa fa-link\"></i></a>事前準備 (Postgres)</h1>\n\n<p>以下のような<code>users</code>テーブルを準備します。DBは<code>dev</code>、ユーザも<code>dev</code>になります。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>dev=# \\d users\n              Table \"public.users\"\n Column | Type | Collation | Nullable | Default\n--------+------+-----------+----------+---------\n id     | text |           | not null |\n name   | text |           | not null |\nIndexes:\n    \"users_pkey\" PRIMARY KEY, btree (id)\n</code></pre></div></div>\n\n<h1>\n<span id=\"事前準備-java-プロジェクト\" class=\"fragment\"></span><a href=\"#%E4%BA%8B%E5%89%8D%E6%BA%96%E5%82%99-java-%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88\"><i class=\"fa fa-link\"></i></a>事前準備 (Java プロジェクト)</h1>\n\n<p>以下の4つのモジュールを準備します。</p>\n\n<ol>\n<li>\n<code>mybatis.logging.Main.java</code>: エントリポイント。メインメソッドが定義されている。</li>\n<li>\n<code>mybatis.logging.repository.UsersRepository.java</code>: <code>users</code>テーブルへのMapperインターフェイス。</li>\n<li>\n<code>mybatis-config.xml</code>: MyBatisで利用する、DBへの接続情報。</li>\n<li>\n<code>logging.properties</code>: JULの設定。</li>\n</ol>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">mybatis.logging.Main.java</span></div>\n<div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"kn\">package</span> <span class=\"nn\">mybatis.logging</span><span class=\"o\">;</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">java.io.IOException</span><span class=\"o\">;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">java.io.UncheckedIOException</span><span class=\"o\">;</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">org.apache.ibatis.io.Resources</span><span class=\"o\">;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">org.apache.ibatis.session.SqlSessionFactoryBuilder</span><span class=\"o\">;</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">mybatis.logging.repository.UsersRepository</span><span class=\"o\">;</span>\n\n<span class=\"kd\">public</span> <span class=\"kd\">class</span> <span class=\"nc\">Main</span> <span class=\"o\">{</span>\n    <span class=\"kd\">public</span> <span class=\"kd\">static</span> <span class=\"kt\">void</span> <span class=\"nf\">main</span><span class=\"o\">(</span><span class=\"nc\">String</span><span class=\"o\">[]</span> <span class=\"n\">args</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n        <span class=\"kt\">var</span> <span class=\"n\">builder</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"nc\">SqlSessionFactoryBuilder</span><span class=\"o\">();</span>\n        <span class=\"k\">try</span> <span class=\"o\">(</span><span class=\"kt\">var</span> <span class=\"n\">in</span> <span class=\"o\">=</span> <span class=\"nc\">Resources</span><span class=\"o\">.</span><span class=\"na\">getResourceAsStream</span><span class=\"o\">(</span><span class=\"s\">\"mybatis-config.xml\"</span><span class=\"o\">))</span> <span class=\"o\">{</span>\n            <span class=\"kt\">var</span> <span class=\"n\">factory</span> <span class=\"o\">=</span> <span class=\"n\">builder</span><span class=\"o\">.</span><span class=\"na\">build</span><span class=\"o\">(</span><span class=\"n\">in</span><span class=\"o\">);</span>\n            <span class=\"k\">try</span> <span class=\"o\">(</span><span class=\"kt\">var</span> <span class=\"n\">session</span> <span class=\"o\">=</span> <span class=\"n\">factory</span><span class=\"o\">.</span><span class=\"na\">openSession</span><span class=\"o\">(</span><span class=\"kc\">true</span><span class=\"o\">))</span> <span class=\"o\">{</span>\n                <span class=\"kt\">var</span> <span class=\"n\">usersRepository</span> <span class=\"o\">=</span> <span class=\"n\">session</span><span class=\"o\">.</span><span class=\"na\">getMapper</span><span class=\"o\">(</span><span class=\"nc\">UsersRepository</span><span class=\"o\">.</span><span class=\"na\">class</span><span class=\"o\">);</span>\n                <span class=\"n\">usersRepository</span><span class=\"o\">.</span><span class=\"na\">truncate</span><span class=\"o\">();</span>\n                <span class=\"n\">usersRepository</span><span class=\"o\">.</span><span class=\"na\">insert</span><span class=\"o\">(</span><span class=\"s\">\"1\"</span><span class=\"o\">,</span> <span class=\"s\">\"Alice\"</span><span class=\"o\">);</span>\n                <span class=\"n\">usersRepository</span><span class=\"o\">.</span><span class=\"na\">insert</span><span class=\"o\">(</span><span class=\"s\">\"2\"</span><span class=\"o\">,</span> <span class=\"s\">\"Bob\"</span><span class=\"o\">);</span>\n            <span class=\"o\">}</span>\n        <span class=\"o\">}</span> <span class=\"k\">catch</span> <span class=\"o\">(</span><span class=\"nc\">IOException</span> <span class=\"n\">e</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n            <span class=\"k\">throw</span> <span class=\"k\">new</span> <span class=\"nf\">UncheckedIOException</span><span class=\"o\">(</span><span class=\"n\">e</span><span class=\"o\">);</span>\n        <span class=\"o\">}</span>\n    <span class=\"o\">}</span>\n<span class=\"o\">}</span>\n\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"java\">\n<div class=\"code-lang\"><span class=\"bold\">mybatis.logging.repository.UsersRepository.java</span></div>\n<div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"kn\">package</span> <span class=\"nn\">mybatis.logging.repository</span><span class=\"o\">;</span>\n\n<span class=\"kn\">import</span> <span class=\"nn\">org.apache.ibatis.annotations.Delete</span><span class=\"o\">;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">org.apache.ibatis.annotations.Insert</span><span class=\"o\">;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">org.apache.ibatis.annotations.Param</span><span class=\"o\">;</span>\n\n<span class=\"kd\">public</span> <span class=\"kd\">interface</span> <span class=\"nc\">UsersRepository</span> <span class=\"o\">{</span>\n\n    <span class=\"nd\">@Insert</span><span class=\"o\">(</span><span class=\"s\">\"INSERT INTO users (id, name) VALUES (#{id}, #{name})\"</span><span class=\"o\">)</span>\n    <span class=\"kt\">int</span> <span class=\"nf\">insert</span><span class=\"o\">(</span><span class=\"nd\">@Param</span><span class=\"o\">(</span><span class=\"s\">\"id\"</span><span class=\"o\">)</span> <span class=\"nc\">String</span> <span class=\"n\">id</span><span class=\"o\">,</span> <span class=\"nd\">@Param</span><span class=\"o\">(</span><span class=\"s\">\"name\"</span><span class=\"o\">)</span> <span class=\"nc\">String</span> <span class=\"n\">name</span><span class=\"o\">);</span>\n\n    <span class=\"nd\">@Delete</span><span class=\"o\">(</span><span class=\"s\">\"DELETE FROM users\"</span><span class=\"o\">)</span>\n    <span class=\"kt\">int</span> <span class=\"nf\">truncate</span><span class=\"o\">();</span>\n<span class=\"o\">}</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"xml\">\n<div class=\"code-lang\"><span class=\"bold\">mybatis-config.xml</span></div>\n<div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"cp\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;</span>\n<span class=\"cp\">&lt;!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\"&gt;</span>\n\n<span class=\"nt\">&lt;configuration&gt;</span>\n  <span class=\"nt\">&lt;environments</span> <span class=\"na\">default=</span><span class=\"s\">\"dev\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;environment</span> <span class=\"na\">id=</span><span class=\"s\">\"dev\"</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;transactionManager</span> <span class=\"na\">type=</span><span class=\"s\">\"JDBC\"</span><span class=\"nt\">&gt;&lt;/transactionManager&gt;</span>\n      <span class=\"nt\">&lt;dataSource</span> <span class=\"na\">type=</span><span class=\"s\">\"POOLED\"</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;property</span> <span class=\"na\">name=</span><span class=\"s\">\"driver\"</span> <span class=\"na\">value=</span><span class=\"s\">\"org.postgresql.Driver\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;property</span> <span class=\"na\">name=</span><span class=\"s\">\"url\"</span> <span class=\"na\">value=</span><span class=\"s\">\"jdbc:postgresql://localhost:5432/dev\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;property</span> <span class=\"na\">name=</span><span class=\"s\">\"username\"</span> <span class=\"na\">value=</span><span class=\"s\">\"dev\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;property</span> <span class=\"na\">name=</span><span class=\"s\">\"password\"</span> <span class=\"na\">value=</span><span class=\"s\">\"password\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/dataSource&gt;</span>\n    <span class=\"nt\">&lt;/environment&gt;</span>\n  <span class=\"nt\">&lt;/environments&gt;</span>\n\n  <span class=\"nt\">&lt;mappers&gt;</span>\n    <span class=\"nt\">&lt;mapper</span> <span class=\"na\">class=</span><span class=\"s\">\"mybatis.logging.repository.UsersRepository\"</span> <span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/mappers&gt;</span>\n<span class=\"nt\">&lt;/configuration&gt;</span>\n</code></pre></div>\n</div>\n\n<div class=\"code-frame\" data-lang=\"properties\">\n<div class=\"code-lang\"><span class=\"bold\">logging.properties</span></div>\n<div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"c\"># ROOT LOGGER\n</span><span class=\"py\">handlers</span> <span class=\"p\">=</span> <span class=\"s\">java.util.logging.ConsoleHandler</span>\n<span class=\"py\">.level</span> <span class=\"p\">=</span> <span class=\"s\">INFO</span>\n\n<span class=\"c\"># ConsoleHandler Default Setting\n</span><span class=\"py\">java.util.logging.ConsoleHandler.level</span> <span class=\"p\">=</span> <span class=\"s\">ALL</span>\n<span class=\"py\">java.util.logging.ConsoleHandler.formatter</span> <span class=\"p\">=</span> <span class=\"s\">java.util.logging.SimpleFormatter</span>\n\n<span class=\"c\"># MyBatis LOGGER\n</span><span class=\"py\">mybatis.logging.repository.level</span> <span class=\"p\">=</span> <span class=\"s\">FINE</span>\n</code></pre></div>\n</div>\n\n<p>配置情報を画像で示したものが以下になります (Eclipse)。<br>\n<a href=\"https://camo.qiitausercontent.com/4f7a9afc6b87d9ec1b23275e48b612b0b0dfd10c/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f65366330383235312d636338322d646163332d383835352d3964633266383736613137352e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fe6c08251-cc82-dac3-8855-9dc2f876a175.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3b086f0eccf94bf67ed4aae53a75550e\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/e6c08251-cc82-dac3-8855-9dc2f876a175.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fe6c08251-cc82-dac3-8855-9dc2f876a175.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e7746290e7fb37d43e181642aca9ba50 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"実行\" class=\"fragment\"></span><a href=\"#%E5%AE%9F%E8%A1%8C\"><i class=\"fa fa-link\"></i></a>実行</h1>\n\n<p>あとはMainクラス=<code>mybatis.logging.Main</code>として、Javaを実行します。このときVMオプション<code>java.util.logging.config.file</code>にJUL用のpropertiesファイルを指定します(上記の例では<code>logging.properties</code>)。以下は<code>Eclipse</code>でVMオプションを設定する例になります。ここはお手元の環境に合わせて適宜変更してください。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/54b78dc6145b02cf389a3c22ae1ead8ae53cac60/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f36633365633431652d636138662d643965362d363232652d3231313834623136623564322e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F6c3ec41e-ca8f-d9e6-622e-21184b16b5d2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f069422f90b9210b5e95e740ac54431b\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/6c3ec41e-ca8f-d9e6-622e-21184b16b5d2.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F6c3ec41e-ca8f-d9e6-622e-21184b16b5d2.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4b9afb44556c050b13dc26fbb345c154 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"結果\" class=\"fragment\"></span><a href=\"#%E7%B5%90%E6%9E%9C\"><i class=\"fa fa-link\"></i></a>結果</h1>\n\n<p>以下のようなログが標準出力に出力されれば成功です。ログをファイルなどに残したい場合は適宜handlerの指定を変更してください。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre class=\"with-code\"><code>4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt;  Preparing: DELETE FROM users \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt; Parameters: \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: &lt;==    Updates: 2\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt;  Preparing: INSERT INTO users (id, name) VALUES (?, ?) \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt; Parameters: 1(String), Alice(String)\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: &lt;==    Updates: 1\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt;  Preparing: INSERT INTO users (id, name) VALUES (?, ?) \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==&gt; Parameters: 2(String), Bob(String)\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: &lt;==    Updates: 1\n</code></pre></div></div>\n\n<h1>\n<span id=\"参考\" class=\"fragment\"></span><a href=\"#%E5%8F%82%E8%80%83\"><i class=\"fa fa-link\"></i></a>参考</h1>\n\n<ul>\n<li><a href=\"http://www.mybatis.org/mybatis-3/ja/logging.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://www.mybatis.org/mybatis-3/ja/logging.html</a></li>\n<li><a href=\"http://www.mybatis.org/generator/reference/logging.html\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">http://www.mybatis.org/generator/reference/logging.html</a></li>\n</ul>\n","body":"# はじめに\n\n「`java.util.logging`(以降は`JUL`と表記)を利用して、MyBatisが発行したSQLの実行ログを記録する」という、意外に珍しいことに取り組んだので、その際の手順を簡単に残しておきたいと思います。結構長い記事ですが、`logging.properties`の設定が最大の肝になるはずです。\n\n\n# 注意\n\nこの記事は以下の環境で、稼働確認を行いましたが、バージョンやミドルウェアが異なる環境でも、動作すると思います。\n\n- Postgres 10.5\n- Java 11\n- MyBatis 3.5.1\n- Postgres JDBC 42.2.5\n\n\n# 事前準備 (Postgres)\n\n以下のような`users`テーブルを準備します。DBは`dev`、ユーザも`dev`になります。\n\n```\ndev=# \\d users\n              Table \"public.users\"\n Column | Type | Collation | Nullable | Default\n--------+------+-----------+----------+---------\n id     | text |           | not null |\n name   | text |           | not null |\nIndexes:\n    \"users_pkey\" PRIMARY KEY, btree (id)\n```\n\n# 事前準備 (Java プロジェクト)\n\n以下の4つのモジュールを準備します。\n\n1. `mybatis.logging.Main.java`: エントリポイント。メインメソッドが定義されている。\n2. `mybatis.logging.repository.UsersRepository.java`: `users`テーブルへのMapperインターフェイス。\n3. `mybatis-config.xml`: MyBatisで利用する、DBへの接続情報。\n4. `logging.properties`: JULの設定。\n\n```java:mybatis.logging.Main.java\npackage mybatis.logging;\n\nimport java.io.IOException;\nimport java.io.UncheckedIOException;\n\nimport org.apache.ibatis.io.Resources;\nimport org.apache.ibatis.session.SqlSessionFactoryBuilder;\n\nimport mybatis.logging.repository.UsersRepository;\n\npublic class Main {\n    public static void main(String[] args) {\n        var builder = new SqlSessionFactoryBuilder();\n        try (var in = Resources.getResourceAsStream(\"mybatis-config.xml\")) {\n            var factory = builder.build(in);\n            try (var session = factory.openSession(true)) {\n                var usersRepository = session.getMapper(UsersRepository.class);\n                usersRepository.truncate();\n                usersRepository.insert(\"1\", \"Alice\");\n                usersRepository.insert(\"2\", \"Bob\");\n            }\n        } catch (IOException e) {\n            throw new UncheckedIOException(e);\n        }\n    }\n}\n\n```\n\n```java:mybatis.logging.repository.UsersRepository.java\npackage mybatis.logging.repository;\n\nimport org.apache.ibatis.annotations.Delete;\nimport org.apache.ibatis.annotations.Insert;\nimport org.apache.ibatis.annotations.Param;\n\npublic interface UsersRepository {\n    \n    @Insert(\"INSERT INTO users (id, name) VALUES (#{id}, #{name})\")\n    int insert(@Param(\"id\") String id, @Param(\"name\") String name);\n    \n    @Delete(\"DELETE FROM users\")\n    int truncate();\n}\n```\n\n```xml:mybatis-config.xml\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<!DOCTYPE configuration PUBLIC \"-//mybatis.org//DTD Config 3.0//EN\" \"http://mybatis.org/dtd/mybatis-3-config.dtd\">\n\n<configuration>\n  <environments default=\"dev\">\n    <environment id=\"dev\">\n      <transactionManager type=\"JDBC\"></transactionManager>\n      <dataSource type=\"POOLED\">\n        <property name=\"driver\" value=\"org.postgresql.Driver\"/>\n        <property name=\"url\" value=\"jdbc:postgresql://localhost:5432/dev\"/>\n        <property name=\"username\" value=\"dev\"/>\n        <property name=\"password\" value=\"password\"/>\n      </dataSource>\n    </environment>\n  </environments>\n  \n  <mappers>\n    <mapper class=\"mybatis.logging.repository.UsersRepository\" />\n  </mappers>\n</configuration>\n```\n\n```properties:logging.properties\n# ROOT LOGGER\nhandlers = java.util.logging.ConsoleHandler\n.level = INFO\n\n# ConsoleHandler Default Setting\njava.util.logging.ConsoleHandler.level = ALL\njava.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter\n\n# MyBatis LOGGER\nmybatis.logging.repository.level = FINE\n```\n\n配置情報を画像で示したものが以下になります (Eclipse)。\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/e6c08251-cc82-dac3-8855-9dc2f876a175.png)\n\n\n# 実行\n\nあとはMainクラス=`mybatis.logging.Main`として、Javaを実行します。このときVMオプション`java.util.logging.config.file`にJUL用のpropertiesファイルを指定します(上記の例では`logging.properties`)。以下は`Eclipse`でVMオプションを設定する例になります。ここはお手元の環境に合わせて適宜変更してください。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/6c3ec41e-ca8f-d9e6-622e-21184b16b5d2.png)\n\n\n\n# 結果\n\n以下のようなログが標準出力に出力されれば成功です。ログをファイルなどに残したい場合は適宜handlerの指定を変更してください。\n\n```\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==>  Preparing: DELETE FROM users \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==> Parameters: \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: <==    Updates: 2\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==>  Preparing: INSERT INTO users (id, name) VALUES (?, ?) \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==> Parameters: 1(String), Alice(String)\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: <==    Updates: 1\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==>  Preparing: INSERT INTO users (id, name) VALUES (?, ?) \n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: ==> Parameters: 2(String), Bob(String)\n4月 13, 2019 6:31:41 午後 org.apache.ibatis.logging.jdk14.Jdk14LoggingImpl debug\n普通: <==    Updates: 1\n```\n\n# 参考\n\n- http://www.mybatis.org/mybatis-3/ja/logging.html\n- http://www.mybatis.org/generator/reference/logging.html\n","coediting":false,"comments_count":0,"created_at":"2019-04-14T15:31:04+09:00","group":null,"id":"96a4ab0c61f7b02d5545","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"Java","versions":[]},{"name":"MyBatis","versions":[]}],"title":"JULを利用して、MyBatisが発行したSQLの実行ログを記録する","updated_at":"2019-04-14T15:41:28+09:00","url":"https://qiita.com/neko_the_shadow/items/96a4ab0c61f7b02d5545","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":183,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null,"team_membership":null}