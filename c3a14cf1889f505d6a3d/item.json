{"rendered_body":"<p>テーブルXとテーブルYのデータがすべて一致しているかを確認したい場合、どのようにすればよいでしょうか?</p>\n\n<p>集合Xと集合Yが等しいことを確認したい場合、以下の1または2のどちらかを確認すればよいです。</p>\n\n<ol>\n<li>$(X \\subseteq Y) = (Y \\subseteq X)$</li>\n<li>$(X \\cap Y) = (X \\cup Y)$</li>\n</ol>\n\n<p>これをそのままSQLにすればよいですね。</p>\n\n<p>1.については、以下のSQLが結果セットを返さない場合、テーブルXとテーブルYは等しいといえます。</p>\n\n<div class=\"code-frame\" data-lang=\"SQL\"><div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"p\">((</span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">x</span>\n       <span class=\"k\">EXCEPT</span>\n       <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n       <span class=\"k\">UNION</span> <span class=\"k\">ALL</span>\n      <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">y</span>\n       <span class=\"k\">EXCEPT</span>\n       <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">x</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">z</span><span class=\"p\">;</span>\n</code></pre></div></div>\n\n<p>2.についても、テーブルXとテーブルYが等しいなら、以下のSQLの結果セットは0件になります。</p>\n\n<div class=\"code-frame\" data-lang=\"SQL\"><div class=\"highlight\"><pre class=\"with-code\"><code><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"p\">((</span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">x</span>\n       <span class=\"k\">UNION</span>\n       <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">y</span><span class=\"p\">)</span>\n       <span class=\"k\">EXCEPT</span>\n      <span class=\"p\">(</span><span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">x</span>\n       <span class=\"k\">INTERSECT</span>\n       <span class=\"k\">SELECT</span> <span class=\"o\">*</span> <span class=\"k\">FROM</span> <span class=\"n\">y</span><span class=\"p\">))</span> <span class=\"k\">AS</span> <span class=\"n\">z</span><span class=\"p\">;</span>\n</code></pre></div></div>\n","body":"テーブルXとテーブルYのデータがすべて一致しているかを確認したい場合、どのようにすればよいでしょうか?\n\n集合Xと集合Yが等しいことを確認したい場合、以下の1または2のどちらかを確認すればよいです。\n\n1. $(X \\subseteq Y) = (Y \\subseteq X)$\n2. $(X \\cap Y) = (X \\cup Y)$\n\nこれをそのままSQLにすればよいですね。\n\n1.については、以下のSQLが結果セットを返さない場合、テーブルXとテーブルYは等しいといえます。\n\n```SQL\nSELECT *\nFROM ((SELECT * FROM x\n       EXCEPT\n       SELECT * FROM y)\n       UNION ALL\n      (SELECT * FROM y\n       EXCEPT\n       SELECT * FROM x)) AS z;\n```\n\n2.についても、テーブルXとテーブルYが等しいなら、以下のSQLの結果セットは0件になります。\n\n```SQL\nSELECT *\nFROM ((SELECT * FROM x\n       UNION\n       SELECT * FROM y)\n       EXCEPT\n      (SELECT * FROM x\n       INTERSECT\n       SELECT * FROM y)) AS z;\n```\n","coediting":false,"comments_count":0,"created_at":"2021-03-02T13:38:20+09:00","group":null,"id":"c3a14cf1889f505d6a3d","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"SQL","versions":[]}],"title":"2つのテーブルのデータがすべて一致しているかを確認したい","updated_at":"2021-03-02T13:38:20+09:00","url":"https://qiita.com/neko_the_shadow/items/c3a14cf1889f505d6a3d","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":183,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null,"team_membership":null}