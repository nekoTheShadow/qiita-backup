{"rendered_body":"<p>SQL Server 2019では行値式(row value constructor)が利用できないようです。</p>\n\n<p>具体的には以下のようなSQLがSyntax Errorになります。</p>\n\n<div class=\"code-frame\" data-lang=\"SQL\"><div class=\"highlight\"><pre><span class=\"k\">SELECT</span> <span class=\"o\">*</span>\n<span class=\"k\">FROM</span> <span class=\"n\">t</span>\n<span class=\"k\">WHERE</span> <span class=\"p\">(</span><span class=\"n\">col1</span><span class=\"p\">,</span> <span class=\"n\">col2</span><span class=\"p\">)</span> <span class=\"k\">IN</span> <span class=\"p\">((</span><span class=\"s1\">'A'</span><span class=\"p\">,</span> <span class=\"mi\">1</span><span class=\"p\">),</span> <span class=\"p\">(</span><span class=\"s1\">'B'</span><span class=\"p\">,</span> <span class=\"mi\">2</span><span class=\"p\">));</span>\n</pre></div></div>\n\n<p>行値式はベンダー依存の文法ではなく、標準SQL(SQL92)に定められた文法です。その証左としてPostgres13とMySQL8およびOracle Databse 19cで上記のSQLが動作することを確認できました。</p>\n\n<p>Microsoftが用意しているSQL ServerのFeedback forumを見たところ、「行値式をサポートしてほしい」というトピックが2007年ごろにたてられていますが、2021年3月3日現在、UNPLANEDタグが付けられており、少なくとも現時点では行値式がサポート外であることは間違いなさそうです。</p>\n\n<p><qiita-embed-ogp src=\"https://feedback.azure.com/forums/908035-sql-server/suggestions/32894992-add-support-for-ansi-standard-row-value-constructo\"></qiita-embed-ogp></p>\n\n<p>なお行値式がサポート外であることをSQL Serverのリファレンスから見つけることはできませんでした。</p>\n\n<p><qiita-embed-ogp src=\"https://docs.microsoft.com/ja-jp/sql/sql-server/?view=sql-server-ver15\"></qiita-embed-ogp></p>\n\n<p><strong>環境情報</strong></p>\n\n<ul>\n<li>Microsoft SQL Server 2019 (RTM-CU9) (KB5000642) - 15.0.4102.2 (X64)  Jan 25 2021 20:16:12  Copyright (C) 2019 Microsoft Corporation Developer Edition (64-bit) on Linux (Ubuntu 18.04.5 LTS) </li>\n<li>PostgreSQL 13.2 (Debian 13.2-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit</li>\n<li>mysql  Ver 8.0.23 for Linux on x86_64 (MySQL Community Server - GPL)</li>\n<li>Oracle Database 19c Standard Edition 2 Release 19.0.0.0.0 - Production\nVersion 19.3.0.0.0</li>\n</ul>\n","body":"SQL Server 2019では行値式(row value constructor)が利用できないようです。\n\n具体的には以下のようなSQLがSyntax Errorになります。\n\n```SQL\nSELECT *\nFROM t\nWHERE (col1, col2) IN (('A', 1), ('B', 2));\n```\n\n行値式はベンダー依存の文法ではなく、標準SQL(SQL92)に定められた文法です。その証左としてPostgres13とMySQL8およびOracle Databse 19cで上記のSQLが動作することを確認できました。\n\nMicrosoftが用意しているSQL ServerのFeedback forumを見たところ、「行値式をサポートしてほしい」というトピックが2007年ごろにたてられていますが、2021年3月3日現在、UNPLANEDタグが付けられており、少なくとも現時点では行値式がサポート外であることは間違いなさそうです。\n\nhttps://feedback.azure.com/forums/908035-sql-server/suggestions/32894992-add-support-for-ansi-standard-row-value-constructo\n\nなお行値式がサポート外であることをSQL Serverのリファレンスから見つけることはできませんでした。\n\nhttps://docs.microsoft.com/ja-jp/sql/sql-server/?view=sql-server-ver15\n\n**環境情報**\n\n- Microsoft SQL Server 2019 (RTM-CU9) (KB5000642) - 15.0.4102.2 (X64)  Jan 25 2021 20:16:12  Copyright (C) 2019 Microsoft Corporation Developer Edition (64-bit) on Linux (Ubuntu 18.04.5 LTS) <X64>\n- PostgreSQL 13.2 (Debian 13.2-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit\n- mysql  Ver 8.0.23 for Linux on x86_64 (MySQL Community Server - GPL)\n- Oracle Database 19c Standard Edition 2 Release 19.0.0.0.0 - Production\nVersion 19.3.0.0.0\n\n","coediting":false,"comments_count":0,"created_at":"2021-03-03T22:36:15+09:00","group":null,"id":"439704e504ce818e73c9","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"SQLServer","versions":[]}],"title":"SQL Server 2019では行値式が利用できない","updated_at":"2021-03-03T22:36:15+09:00","url":"https://qiita.com/neko_the_shadow/items/439704e504ce818e73c9","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":180,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null}