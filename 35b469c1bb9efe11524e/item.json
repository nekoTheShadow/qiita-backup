{"rendered_body":"<p>[注意1] この記事の内容は以下の環境で動作確認を行っています。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>C:\\payara5\\bin&gt;asadmin.bat version\nVersion string could not be obtained from Server [localhost:4848].\n(Turn debugging on e.g. by setting AS_DEBUG=true in your environment, to see the details.)\nUsing locally retrieved version string from version class.\nVersion = Payara Server  5.191 #badassfish (build 94)\nCommand version executed successfully.\n</code></pre></div></div>\n\n<p>[注意2] 次のURLを参考にしています: <a href=\"https://www.coppermine.jp/note/2019/01/payara5-npn-version-switch/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\">https://www.coppermine.jp/note/2019/01/payara5-npn-version-switch/</a></p>\n\n<hr>\n\n<p>Java EEのローカル開発環境としてPayara Serverを利用しているのですが、ソフトウェアの導入直後、以下のエラーによりPayara Serverが起動しないということがありました。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>エラー: メイン・クラス[1.8.0|1.8.0u120]-Xbootclasspath.p:C:\\payara5\\glassfish.lib.grizzly-npn-bootstrap-1.6.jarが見つからなかったかロードできませんでした\n</code></pre></div></div>\n\n<p>この問題に対する対処法はいろいろあると思いますが、わたしの場合は<code>domain.xml</code>を修正することで問題が解消しました。ディレクトリ<code>${install_directory}/glassfish/domains/${domain_name}</code>に格納されている<code>domain.xml</code>を確認すると、以下のような記述が複数個所見つかると思います。</p>\n\n<div class=\"code-frame\" data-lang=\"xml\"><div class=\"highlight\"><pre><code><span class=\"c\">&lt;!-- Grizzly NPN Jar version --&gt;</span>\n<span class=\"nt\">&lt;jvm-options&gt;</span>[1.8.0|1.8.0u120]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.6.jar<span class=\"nt\">&lt;/jvm-options&gt;</span>\n<span class=\"nt\">&lt;jvm-options&gt;</span>[1.8.0u121|1.8.0u160]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.7.jar<span class=\"nt\">&lt;/jvm-options&gt;</span>\n<span class=\"nt\">&lt;jvm-options&gt;</span>[1.8.0u161|1.8.0u190]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.jar<span class=\"nt\">&lt;/jvm-options&gt;</span>\n<span class=\"nt\">&lt;jvm-options&gt;</span>[1.8.0u191|1.8.0u500]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar<span class=\"nt\">&lt;/jvm-options&gt;</span>\n</code></pre></div></div>\n\n<p>これはJavaのバージョンに合わせてロードする<code>grizzly-npn-bootstrap-${version}.jar</code>を変えるという機構のようですが、これがうまく動いていないことがPayara Serverが正常に起動しない原因のようです。自動で切り替える機構がうまく動かないなら、ハードコーディングしてしまいます。</p>\n\n<p>ここでPayara Serverで利用してるJavaのバージョンを確認します。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>C:\\jdk\\jdk1.8.0_202\\bin&gt;java -version\nopenjdk version \"1.8.0_202\"\nOpenJDK Runtime Environment Corretto-8.202.08.2 (build 1.8.0_202-b08)\nOpenJDK 64-Bit Server VM Corretto-8.202.08.2 (build 25.202-b08, mixed mode)\n</code></pre></div></div>\n\n<p>Javaのバージョンは<code>1.8.0u202</code>で、<code>domain.xml</code>の記述を見る限りだと<code>grizzly-npn-bootstrap-1.8.1.jar</code>をロードするのが正解のようです。そこで上記の<code>domain.xml</code>の記述をすべて削除するか、コメントアウトして、以下の通り書き換えます。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>&lt;jvm-options&gt;-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar&lt;/jvm-options&gt;\n</code></pre></div></div>\n\n<p>するとPayara Serverは正しく起動するようになるはず(´・ω・｀)</p>\n","body":"[注意1] この記事の内容は以下の環境で動作確認を行っています。\n\n```\nC:\\payara5\\bin>asadmin.bat version\nVersion string could not be obtained from Server [localhost:4848].\n(Turn debugging on e.g. by setting AS_DEBUG=true in your environment, to see the details.)\nUsing locally retrieved version string from version class.\nVersion = Payara Server  5.191 #badassfish (build 94)\nCommand version executed successfully.\n```\n\n[注意2] 次のURLを参考にしています: https://www.coppermine.jp/note/2019/01/payara5-npn-version-switch/\n\n***\n\nJava EEのローカル開発環境としてPayara Serverを利用しているのですが、ソフトウェアの導入直後、以下のエラーによりPayara Serverが起動しないということがありました。\n\n```\nエラー: メイン・クラス[1.8.0|1.8.0u120]-Xbootclasspath.p:C:\\payara5\\glassfish.lib.grizzly-npn-bootstrap-1.6.jarが見つからなかったかロードできませんでした\n```\n\nこの問題に対する対処法はいろいろあると思いますが、わたしの場合は`domain.xml`を修正することで問題が解消しました。ディレクトリ`${install_directory}/glassfish/domains/${domain_name}`に格納されている`domain.xml`を確認すると、以下のような記述が複数個所見つかると思います。\n\n```xml\n<!-- Grizzly NPN Jar version -->\n<jvm-options>[1.8.0|1.8.0u120]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.6.jar</jvm-options>\n<jvm-options>[1.8.0u121|1.8.0u160]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.7.jar</jvm-options>\n<jvm-options>[1.8.0u161|1.8.0u190]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.jar</jvm-options>\n<jvm-options>[1.8.0u191|1.8.0u500]-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar</jvm-options>\n```\n\nこれはJavaのバージョンに合わせてロードする`grizzly-npn-bootstrap-${version}.jar`を変えるという機構のようですが、これがうまく動いていないことがPayara Serverが正常に起動しない原因のようです。自動で切り替える機構がうまく動かないなら、ハードコーディングしてしまいます。\n\nここでPayara Serverで利用してるJavaのバージョンを確認します。\n\n```\nC:\\jdk\\jdk1.8.0_202\\bin>java -version\nopenjdk version \"1.8.0_202\"\nOpenJDK Runtime Environment Corretto-8.202.08.2 (build 1.8.0_202-b08)\nOpenJDK 64-Bit Server VM Corretto-8.202.08.2 (build 25.202-b08, mixed mode)\n```\n\nJavaのバージョンは`1.8.0u202`で、`domain.xml`の記述を見る限りだと`grizzly-npn-bootstrap-1.8.1.jar`をロードするのが正解のようです。そこで上記の`domain.xml`の記述をすべて削除するか、コメントアウトして、以下の通り書き換えます。\n\n```\n<jvm-options>-Xbootclasspath/p:${com.sun.aas.installRoot}/lib/grizzly-npn-bootstrap-1.8.1.jar</jvm-options>\n```\n\nするとPayara Serverは正しく起動するようになるはず(´・ω・｀)\n","coediting":false,"comments_count":0,"created_at":"2019-05-05T10:46:09+09:00","group":null,"id":"35b469c1bb9efe11524e","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"glassfish","versions":[]},{"name":"payara","versions":[]}],"title":"「glassfish.lib.grizzly-npn-bootstrap-1.6.jarが見つからなかったかロードできませんでした」が原因でPayara Serverが起動しない","updated_at":"2019-05-05T10:46:28+09:00","url":"https://qiita.com/neko_the_shadow/items/35b469c1bb9efe11524e","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":36,"github_login_name":null,"id":"neko_the_shadow","items_count":196,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null,"team_membership":null}