{"rendered_body":"<p><a href=\"https://codeiq.jp/q/2611\" rel=\"nofollow noopener\" target=\"_blank\">CodeIQ「『プラス・マイナス・ゼロ』問題」</a>の掲載期間が終了したということで、わたしが提出したRubyコードを公開したいと思います。</p>\n\n<div class=\"code-frame\" data-lang=\"rb\"><div class=\"highlight\"><pre><span class=\"vi\">@n</span> <span class=\"o\">=</span> <span class=\"nb\">gets</span><span class=\"p\">.</span><span class=\"nf\">to_i</span>\n<span class=\"vi\">@memo</span> <span class=\"o\">=</span> <span class=\"no\">Array</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">(</span><span class=\"vi\">@n</span> <span class=\"o\">+</span> <span class=\"mi\">1</span><span class=\"p\">){</span><span class=\"no\">Hash</span><span class=\"p\">.</span><span class=\"nf\">new</span><span class=\"p\">}</span>\n\n<span class=\"k\">def</span> <span class=\"nf\">g</span><span class=\"p\">(</span><span class=\"n\">n</span><span class=\"p\">,</span> <span class=\"n\">s</span><span class=\"p\">)</span>\n   <span class=\"vi\">@memo</span><span class=\"p\">[</span><span class=\"n\">n</span><span class=\"p\">][</span><span class=\"n\">s</span><span class=\"p\">]</span> <span class=\"o\">||=</span> <span class=\"k\">if</span> <span class=\"n\">n</span> <span class=\"o\">==</span> <span class=\"mi\">1</span>\n        <span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"o\">==</span> <span class=\"mi\">1</span> <span class=\"o\">||</span> <span class=\"n\">s</span> <span class=\"o\">==</span> <span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">)</span> <span class=\"p\">?</span> <span class=\"mi\">1</span> <span class=\"p\">:</span> <span class=\"mi\">0</span>\n    <span class=\"k\">else</span>\n        <span class=\"n\">g</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">s</span> <span class=\"o\">-</span> <span class=\"n\">n</span><span class=\"p\">)</span> <span class=\"o\">+</span> <span class=\"n\">g</span><span class=\"p\">(</span><span class=\"n\">n</span> <span class=\"o\">-</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"n\">s</span> <span class=\"o\">+</span> <span class=\"n\">n</span><span class=\"p\">)</span>\n    <span class=\"k\">end</span>\n<span class=\"k\">end</span>\n\n<span class=\"nb\">p</span> <span class=\"n\">g</span><span class=\"p\">(</span><span class=\"vi\">@n</span><span class=\"p\">,</span> <span class=\"mi\">0</span><span class=\"p\">)</span>\n</pre></div></div>\n\n<p>ちょっとごちゃごちゃしていますね……。反省。とりあえず大事なのはメソッド<code>g(n, s)</code>なので、そこだけを追いかけてもらえれば。</p>\n\n<p>合計がsとなるように1からnの整数を問題文のように組み合わせるとき、その組み合わせ方の総数を$G(n,s)$とします。たとえば$G(3,0)$は合計が0となる1,2,3の組み合わせの総数であり、問題に掲げられた例から$G(3,0)=2$となります。</p>\n\n<p>さてこの関数$G$は再帰的に定義できるはずです。</p>\n\n<div class=\"code-frame\" data-lang=\"math\"><div class=\"highlight\"><pre>G(n,s)=G(n-1,s-n)+G(n-1,s+n)\n</pre></div></div>\n\n<p>あとはこれを初期条件に気を付けつつ、効率化のためにメモ化でもしてやれば答えが求まるというわけですね(´・ω・`)</p>\n\n<hr>\n\n<p>なお具体的な問題の内容については、出題者の<a href=\"https://twitter.com/riverplus?lang=ja\" rel=\"nofollow noopener\" target=\"_blank\">@riverplus</a>さんによる解説記事か何かで公開されると思うので、そちらを見てください。公開されたときおぼえていればそのリンクを張り付けておきます。まあ広大なネットの海を探せば見つかると思いますが……。</p>\n\n<p>またほかの方が公開されたコードについては、やはり出題者の<a href=\"https://twitter.com/riverplus?lang=ja\" rel=\"nofollow noopener\" target=\"_blank\">@riverplus</a>さんがTogetterにまとめてくださるそうです。そちらも公開され次第、この記事にそのリンクを張り付けたいと思います。おぼえていれば(´・ω・`)</p>\n\n<p><strong>2016/02/18追記:</strong> <a href=\"http://togetter.com/li/933510\" rel=\"nofollow noopener\" target=\"_blank\">Togetterですが公開されておりました!</a></p>\n","body":"[CodeIQ「『プラス・マイナス・ゼロ』問題」](https://codeiq.jp/q/2611)の掲載期間が終了したということで、わたしが提出したRubyコードを公開したいと思います。\n\n```rb\n@n = gets.to_i\n@memo = Array.new(@n + 1){Hash.new}\n\ndef g(n, s)\n   @memo[n][s] ||= if n == 1\n        (s == 1 || s == -1) ? 1 : 0\n    else\n        g(n - 1, s - n) + g(n - 1, s + n)\n    end\nend\n\np g(@n, 0)\n```\n\nちょっとごちゃごちゃしていますね……。反省。とりあえず大事なのはメソッド`g(n, s)`なので、そこだけを追いかけてもらえれば。\n\n合計がsとなるように1からnの整数を問題文のように組み合わせるとき、その組み合わせ方の総数を$G(n,s)$とします。たとえば$G(3,0)$は合計が0となる1,2,3の組み合わせの総数であり、問題に掲げられた例から$G(3,0)=2$となります。\n\nさてこの関数$G$は再帰的に定義できるはずです。\n\n```math\nG(n,s)=G(n-1,s-n)+G(n-1,s+n)\n```\n\nあとはこれを初期条件に気を付けつつ、効率化のためにメモ化でもしてやれば答えが求まるというわけですね(´・ω・`)\n\n***\n\nなお具体的な問題の内容については、出題者の[@riverplus](https://twitter.com/riverplus?lang=ja)さんによる解説記事か何かで公開されると思うので、そちらを見てください。公開されたときおぼえていればそのリンクを張り付けておきます。まあ広大なネットの海を探せば見つかると思いますが……。\n\nまたほかの方が公開されたコードについては、やはり出題者の[@riverplus](https://twitter.com/riverplus?lang=ja)さんがTogetterにまとめてくださるそうです。そちらも公開され次第、この記事にそのリンクを張り付けたいと思います。おぼえていれば(´・ω・`)\n\n__2016/02/18追記:__ [Togetterですが公開されておりました!](http://togetter.com/li/933510)\n","coediting":false,"comments_count":0,"created_at":"2016-02-18T13:05:16+09:00","group":null,"id":"704fd870ccba05e2ae94","likes_count":4,"private":false,"reactions_count":0,"tags":[{"name":"Ruby","versions":[]},{"name":"codeiq","versions":[]}],"title":"CodeIQ「『プラス・マイナス・ゼロ』問題」に挑戦しました。","updated_at":"2016-02-18T23:40:29+09:00","url":"https://qiita.com/neko_the_shadow/items/704fd870ccba05e2ae94","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":32,"github_login_name":null,"id":"neko_the_shadow","items_count":163,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null}