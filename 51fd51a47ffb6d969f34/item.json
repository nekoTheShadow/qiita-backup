{"rendered_body":"\n<h1>\n<span id=\"注意\" class=\"fragment\"></span><a href=\"#%E6%B3%A8%E6%84%8F\"><i class=\"fa fa-link\"></i></a>注意</h1>\n\n<p>本記事は以下の環境で、稼働確認を行いました。</p>\n\n<ul>\n<li>Windows 10 Home</li>\n<li>Pleiades All in One Eclipse (リリース 2019-06)</li>\n</ul>\n\n<p>ただしWindowsやEclipseの異なるEditionやVersionでも同一の問題が発生することを確認しています。</p>\n\n<h1>\n<span id=\"現象\" class=\"fragment\"></span><a href=\"#%E7%8F%BE%E8%B1%A1\"><i class=\"fa fa-link\"></i></a>現象</h1>\n\n<p>EclipseによるJavaプログラムの開発において、ワークスペースを開くと、プロジェクトがクローズ状態になっていることがあります。もちろん、そのプロジェクトをクローズした記憶などないにもかかわらずです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7947b51aa979a6674c52d1e9d22ab88c9f658b3e/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f39383064643435332d393365302d333133382d343232632d6363663138636537616131362e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F980dd453-93e0-3138-422c-ccf18ce7aa16.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=21ec30c746eb1d65989503113fceb92f\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/980dd453-93e0-3138-422c-ccf18ce7aa16.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F980dd453-93e0-3138-422c-ccf18ce7aa16.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8a8237ec7b0c994c355750cf33730013 1x\" loading=\"lazy\"></a></p>\n\n<p>そこでクローズしているプロジェクトをダブルクリックなどで開こうとすると、以下のようなエラーになり、開けないという現象が発生しました。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a3d33219e359355338ca163fe89ac2388dcd145d/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f65346633356639642d636239372d633261322d313832372d3238386466373666363433332e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fe4f35f9d-cb97-c2a2-1827-288df76f6433.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8d1a5cf18b7d9a45338cac4bceeebc97\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/e4f35f9d-cb97-c2a2-1827-288df76f6433.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fe4f35f9d-cb97-c2a2-1827-288df76f6433.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5d7d621efc61f5db4be5bd1f92bdfcc4 1x\" loading=\"lazy\"></a></p>\n\n<p>エラーメッセージは次の通りです。</p>\n\n<blockquote>\n<p>'sample_project' のプロジェクト記述ファイル (.project) がありません。 このファイルには、プロジェクトに関する重要な情報が含まれています。 このファイルが復元されるまで、プロジェクトは正しく機能しません。</p>\n</blockquote>\n\n<p><code>.project</code>なる隠しファイルがないとのことですが、ファイルシステム上で確認すると、プロジェクトディレクトリ直下に<code>.project</code>が存在しています。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/057a7c03cb4cc145cb60bcf19037990c72e51f25/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f64643761363563302d383635652d346636632d653066372d3464663366396539316462642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fdd7a65c0-865e-4f6c-e0f7-4df3f9e91dbd.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=cee574df68f5d17e448dc92b079af982\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/dd7a65c0-865e-4f6c-e0f7-4df3f9e91dbd.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fdd7a65c0-865e-4f6c-e0f7-4df3f9e91dbd.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b9c57877da62ded18620d3e19d8f093e 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"再現方法\" class=\"fragment\"></span><a href=\"#%E5%86%8D%E7%8F%BE%E6%96%B9%E6%B3%95\"><i class=\"fa fa-link\"></i></a>再現方法</h1>\n\n<p>今回の現象が発生する状況はさまざまだと思いますが、わたしの環境では以下の手順を踏むと問題が再現できました。</p>\n\n<ol>\n<li>ワークスペース<code>workspace_a</code>を作成し、その配下にJavaプロジェクト<code>sample_project</code>を作成する</li>\n<li>ワークスペース<code>workspace_b</code>を作成。ディレクトリ<code>sample_project</code>を<code>workspace_a</code>の配下から<code>workspace_b</code>の配下に移動。Eclipse上で<code>ファイル &gt; ファイル・システムからプロジェクトを開く</code>を選択し、<code>sample_project</code>をインポートする。</li>\n<li>ディレクトリ<code>workspace_c</code>を作成。ディレクトリ<code>workspace_b</code>の配下にあるふたつのディレクトリ<code>.metadata</code>と<code>sample_project</code>を<code>workspace_c</code>配下に移動する。その後<code>workspace_c</code>をワークスペースに指定してEclipseを起動すると、上述した現象が再現する。</li>\n</ol>\n\n<p>下図: <code>ファイル &gt; ファイル・システムからプロジェクトを開く</code>で<code>sample_project</code>をインポートする際のイメージ</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/043dac22831ea19c239e934ddf153e23ebfb42d7/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f30616265303661642d626237332d323661662d393664622d6532663161646334663133622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F0abe06ad-bb73-26af-96db-e2f1adc4f13b.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=423283224213f3d3b5d96ddcbfa0c384\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/0abe06ad-bb73-26af-96db-e2f1adc4f13b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F0abe06ad-bb73-26af-96db-e2f1adc4f13b.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=12e104c38ba572d5ceedaff51420a909 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"対策1-おすすめ\" class=\"fragment\"></span><a href=\"#%E5%AF%BE%E7%AD%961-%E3%81%8A%E3%81%99%E3%81%99%E3%82%81\"><i class=\"fa fa-link\"></i></a>対策1 (おすすめ)</h1>\n\n<p>まず開けなくなったプロジェクトを右クリックし<code>削除</code>を選択。その後<code>ディスク上からプロジェクト・コンテンツを削除</code>にチェックをつけずに<code>OK</code>を押下します。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/a27ad71f8dccc2fb8dddb69d37522b71584f245a/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f39366132346363662d636633382d623130342d366332662d3739316534383333633863652e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F96a24ccf-cf38-b104-6c2f-791e4833c8ce.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3f1d7effbd3eb0f5bbb415d713c78cf1\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/96a24ccf-cf38-b104-6c2f-791e4833c8ce.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2F96a24ccf-cf38-b104-6c2f-791e4833c8ce.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=cd72b6dbcfe2c4cfb68c2be20aac3011 1x\" loading=\"lazy\"></a></p>\n\n<p>次に<code>ファイル &gt; インポート &gt; 既存プロジェクトをワークスペースへ</code>を選択し、<code>次へ</code>を押下すると、<code>プロジェクトのインポート</code>画面が起動します。ここで<code>ルートディレクトリの選択</code>にワークスペースのパスを入力し、さきほど削除したプロジェクトにチェックをつけ、<code>完了</code>を押下します。すると、さきほどまで正常に開くことができなかったプロジェクトが開けるようになっているはずです。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7df0bef76ebc07ed1d531893f1593c1002a374ac/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f62616461313139392d333032652d326232662d393134302d3834633739313464326566622e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fbada1199-302e-2b2f-9140-84c7914d2efb.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=a3d3e7e820913a04b4d61e9eadf53048\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/bada1199-302e-2b2f-9140-84c7914d2efb.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fbada1199-302e-2b2f-9140-84c7914d2efb.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a498025090fedd2556067f2ddca9632f 1x\" loading=\"lazy\"></a></p>\n\n<h1>\n<span id=\"対策2-おすすめでない\" class=\"fragment\"></span><a href=\"#%E5%AF%BE%E7%AD%962-%E3%81%8A%E3%81%99%E3%81%99%E3%82%81%E3%81%A7%E3%81%AA%E3%81%84\"><i class=\"fa fa-link\"></i></a>対策2 (おすすめでない)</h1>\n\n<p>プロジェクトが正常に開けなくなる原因はエラーメッセージにある<code>.project</code>ファイルではなく、<code>.location</code>ファイルが不正な状態に置かれたためです。<code>.location</code>ファイルのパスは次の通りになります: <code>${workspace}/.metadata/.plugins/org.eclipse.core.resources/.projects/${project_name}/.location</code></p>\n\n<p>ここでは、開けなくなったプロジェクトの<code>.location</code>ファイルを削除します。するとEclipseの再起動などなくとも、開けなかったプロジェクトが開けるようになっています。</p>\n\n<p>ただし<code>.metadata</code>以下のファイルやディレクトリの管理はEclipseに任せるべきであり、手動で触るべきではありません。個人的な経験則では<code>.location</code>を削除しても問題になったことはありませんが、念のため、事前にバックアップをとるか、非可逆的に破壊されても問題ない環境で実施してください。</p>\n\n<h1>\n<span id=\"詳細\" class=\"fragment\"></span><a href=\"#%E8%A9%B3%E7%B4%B0\"><i class=\"fa fa-link\"></i></a>詳細</h1>\n\n<p><code>sample_project</code>の<code>.location</code>は次のパスになります: <code>workspace_c/.metadata/.plugins/org.eclipse.core.resources/.projects/sample_project/.location</code> <code>.location</code>ファイルはバイナリなので、正確な内容は不明ですが、テキストエディタなどで無理やり開いてやると、なにやら絶対パスで<code>workspace_b/sample_project</code>を参照しているような記述が見て取れます。</p>\n\n<p><a href=\"https://camo.qiitausercontent.com/7f0cdedf1b0a349780a730c2584508a38a4a1b88/68747470733a2f2f71696974612d696d6167652d73746f72652e73332e61702d6e6f727468656173742d312e616d617a6f6e6177732e636f6d2f302f3130353835392f62643832313431352d626362382d346163372d386465662d3466623462326466346135642e706e67\" target=\"_blank\" rel=\"nofollow noopener\"><img src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fbd821415-bcb8-4ac7-8def-4fb4b2df4a5d.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=813b5526eb732a44d988add3e374b793\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/bd821415-bcb8-4ac7-8def-4fb4b2df4a5d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F105859%2Fbd821415-bcb8-4ac7-8def-4fb4b2df4a5d.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=1b5d04c08e1c6f9c10bd40d964768ee1 1x\" loading=\"lazy\"></a></p>\n\n<p>「再現方法」の手順3.において、<code>sample_project</code>を<code>workspace_b</code>から<code>workspace_c</code>に移動しており、<code>workspace_b/sample_project</code>は存在しません。つまり存在しないパスを参照しているためにプロジェクトが正常に開けなくなっているものと考えられます。</p>\n\n<p>最後に「<code>.location</code>ファイルになぜ絶対パスが書かれてしまうのか?」という疑問ですが、正直なところこれはよくわかりません（´・ω・｀） 手順2.の<code>ファイル &gt; ファイル・システムからプロジェクトを開く</code>が悪さをしているような気がしますが、詳細は不明です。</p>\n\n<p>そもそも<code>.metadata</code>ディレクトリはそのワークスペースのメタデータを格納しています。つまり<code>.metadata</code>はワークスペースごとに固有であるべきにもかかわらず、手順3.で別のワークスペースの<code>.metadata</code>を移動しています。根本的にはこれがよくないといえそうです。</p>\n","body":"# 注意\n\n本記事は以下の環境で、稼働確認を行いました。\n\n- Windows 10 Home\n- Pleiades All in One Eclipse (リリース 2019-06)\n\nただしWindowsやEclipseの異なるEditionやVersionでも同一の問題が発生することを確認しています。\n\n# 現象\n\nEclipseによるJavaプログラムの開発において、ワークスペースを開くと、プロジェクトがクローズ状態になっていることがあります。もちろん、そのプロジェクトをクローズした記憶などないにもかかわらずです。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/980dd453-93e0-3138-422c-ccf18ce7aa16.png)\n\nそこでクローズしているプロジェクトをダブルクリックなどで開こうとすると、以下のようなエラーになり、開けないという現象が発生しました。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/e4f35f9d-cb97-c2a2-1827-288df76f6433.png)\n\nエラーメッセージは次の通りです。\n\n> 'sample_project' のプロジェクト記述ファイル (.project) がありません。 このファイルには、プロジェクトに関する重要な情報が含まれています。 このファイルが復元されるまで、プロジェクトは正しく機能しません。\n\n`.project`なる隠しファイルがないとのことですが、ファイルシステム上で確認すると、プロジェクトディレクトリ直下に`.project`が存在しています。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/dd7a65c0-865e-4f6c-e0f7-4df3f9e91dbd.png)\n\n\n# 再現方法\n\n今回の現象が発生する状況はさまざまだと思いますが、わたしの環境では以下の手順を踏むと問題が再現できました。\n\n1. ワークスペース`workspace_a`を作成し、その配下にJavaプロジェクト`sample_project`を作成する\n2. ワークスペース`workspace_b`を作成。ディレクトリ`sample_project`を`workspace_a`の配下から`workspace_b`の配下に移動。Eclipse上で`ファイル > ファイル・システムからプロジェクトを開く`を選択し、`sample_project`をインポートする。\n3. ディレクトリ`workspace_c`を作成。ディレクトリ`workspace_b`の配下にあるふたつのディレクトリ`.metadata`と`sample_project`を`workspace_c`配下に移動する。その後`workspace_c`をワークスペースに指定してEclipseを起動すると、上述した現象が再現する。\n\n下図: `ファイル > ファイル・システムからプロジェクトを開く`で`sample_project`をインポートする際のイメージ\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/0abe06ad-bb73-26af-96db-e2f1adc4f13b.png)\n\n\n# 対策1 (おすすめ)\n\nまず開けなくなったプロジェクトを右クリックし`削除`を選択。その後`ディスク上からプロジェクト・コンテンツを削除`にチェックをつけずに`OK`を押下します。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/96a24ccf-cf38-b104-6c2f-791e4833c8ce.png)\n\n次に`ファイル > インポート > 既存プロジェクトをワークスペースへ`を選択し、`次へ`を押下すると、`プロジェクトのインポート`画面が起動します。ここで`ルートディレクトリの選択`にワークスペースのパスを入力し、さきほど削除したプロジェクトにチェックをつけ、`完了`を押下します。すると、さきほどまで正常に開くことができなかったプロジェクトが開けるようになっているはずです。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/bada1199-302e-2b2f-9140-84c7914d2efb.png)\n\n# 対策2 (おすすめでない)\n\nプロジェクトが正常に開けなくなる原因はエラーメッセージにある`.project`ファイルではなく、`.location`ファイルが不正な状態に置かれたためです。`.location`ファイルのパスは次の通りになります: `${workspace}/.metadata/.plugins/org.eclipse.core.resources/.projects/${project_name}/.location`\n\nここでは、開けなくなったプロジェクトの`.location`ファイルを削除します。するとEclipseの再起動などなくとも、開けなかったプロジェクトが開けるようになっています。\n\nただし`.metadata`以下のファイルやディレクトリの管理はEclipseに任せるべきであり、手動で触るべきではありません。個人的な経験則では`.location`を削除しても問題になったことはありませんが、念のため、事前にバックアップをとるか、非可逆的に破壊されても問題ない環境で実施してください。\n\n# 詳細\n\n`sample_project`の`.location`は次のパスになります: `workspace_c/.metadata/.plugins/org.eclipse.core.resources/.projects/sample_project/.location` `.location`ファイルはバイナリなので、正確な内容は不明ですが、テキストエディタなどで無理やり開いてやると、なにやら絶対パスで`workspace_b/sample_project`を参照しているような記述が見て取れます。\n\n![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/105859/bd821415-bcb8-4ac7-8def-4fb4b2df4a5d.png)\n\n「再現方法」の手順3.において、`sample_project`を`workspace_b`から`workspace_c`に移動しており、`workspace_b/sample_project`は存在しません。つまり存在しないパスを参照しているためにプロジェクトが正常に開けなくなっているものと考えられます。\n\n最後に「`.location`ファイルになぜ絶対パスが書かれてしまうのか?」という疑問ですが、正直なところこれはよくわかりません（´・ω・｀） 手順2.の`ファイル > ファイル・システムからプロジェクトを開く`が悪さをしているような気がしますが、詳細は不明です。\n\nそもそも`.metadata`ディレクトリはそのワークスペースのメタデータを格納しています。つまり`.metadata`はワークスペースごとに固有であるべきにもかかわらず、手順3.で別のワークスペースの`.metadata`を移動しています。根本的にはこれがよくないといえそうです。\n","coediting":false,"comments_count":0,"created_at":"2019-08-28T00:31:31+09:00","group":null,"id":"51fd51a47ffb6d969f34","likes_count":0,"private":false,"reactions_count":0,"tags":[{"name":"Eclipse","versions":[]}],"title":".projectが存在するにも関わらず「プロジェクト記述ファイル (.project) がありません」によりプロジェクトが開けない","updated_at":"2019-08-28T00:31:31+09:00","url":"https://qiita.com/neko_the_shadow/items/51fd51a47ffb6d969f34","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":35,"github_login_name":null,"id":"neko_the_shadow","items_count":180,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://nekotheshadow.github.io/"},"page_views_count":null}