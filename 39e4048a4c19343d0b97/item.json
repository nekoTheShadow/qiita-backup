{"rendered_body":"\n<h1>\n<span id=\"環境\" class=\"fragment\"></span><a href=\"#%E7%92%B0%E5%A2%83\"><i class=\"fa fa-link\"></i></a>環境</h1>\n\n<ul>\n<li>rbenv 1.1.2-30-gc879cb0</li>\n<li>ruby-build 20200520-12-g69ccbf4</li>\n<li>Ubuntu 20.04 LTS (Focal Fossa) [Windows Subsystem for Linux 2; WSL2]</li>\n</ul>\n\n<h1>\n<span id=\"前提\" class=\"fragment\"></span><a href=\"#%E5%89%8D%E6%8F%90\"><i class=\"fa fa-link\"></i></a>前提</h1>\n\n<p><a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noopener\" target=\"_blank\">rbenv</a>および<a href=\"https://github.com/rbenv/ruby-build\" rel=\"nofollow noopener\" target=\"_blank\">ruby-build</a>の導入が完了し、<code>rbenv-doctor script</code>による検証がOKであること。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash\nChecking for `rbenv' in PATH: /home/dev/.rbenv/bin/rbenv\nChecking for rbenv shims in PATH: OK\nChecking `rbenv install' support: /home/dev/.rbenv/plugins/ruby-build/bin/rbenv-install (ruby-build 20200520-12-g69ccbf4)\nCounting installed Ruby versions: none\n  There aren't any Ruby versions installed under `/home/dev/.rbenv/versions'.\n  You can install Ruby versions like so: rbenv install 2.2.4\nChecking RubyGems settings: OK\nAuditing installed plugins: OK\n</code></pre></div></div>\n\n<h1>\n<span id=\"問題\" class=\"fragment\"></span><a href=\"#%E5%95%8F%E9%A1%8C\"><i class=\"fa fa-link\"></i></a>問題</h1>\n\n<p>rbenv + ruby-build の導入完了後、<code>rbenv install -v 2.7.1</code>によって、Ruby2.7.1の導入を行ったが、以下のような原因により失敗した (エラー全文を掲載するとさすがに冗長なため、特徴的な部分を抜粋しています)</p>\n\n<ul>\n<li>configure: error: no acceptable C compiler found in $PATH</li>\n<li>cannot load such file -- openssl (LoadError)</li>\n<li>cannot load such file -- digest/sha2.so (LoadError)</li>\n</ul>\n\n<h1>\n<span id=\"原因と対策\" class=\"fragment\"></span><a href=\"#%E5%8E%9F%E5%9B%A0%E3%81%A8%E5%AF%BE%E7%AD%96\"><i class=\"fa fa-link\"></i></a>原因と対策</h1>\n\n<p><strong>Rubyのビルドに必要なライブラリが不足していることが原因でした。</strong>ruby-buildのwikiには<a href=\"https://github.com/rbenv/ruby-build/wiki\" rel=\"nofollow noopener\" target=\"_blank\">Rubyのビルドに必要なライブラリとそのインストール方法がOSごとにまとめられているページ</a>があります。これを参考にして、自分の環境(Ubuntu)に不足しているライブラリのインストールを行ったあと、<code>rbenv install</code>を行うとRuby2.7.1を導入することができました。</p>\n\n<div class=\"code-frame\" data-lang=\"text\"><div class=\"highlight\"><pre><code>sudo apt update \nsudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm6 libgdbm-dev libdb-dev\n</code></pre></div></div>\n","body":"# 環境\n\n- rbenv 1.1.2-30-gc879cb0\n- ruby-build 20200520-12-g69ccbf4\n- Ubuntu 20.04 LTS (Focal Fossa) [Windows Subsystem for Linux 2; WSL2]\n\n# 前提\n\n[rbenv](https://github.com/rbenv/rbenv)および[ruby-build](https://github.com/rbenv/ruby-build)の導入が完了し、`rbenv-doctor script`による検証がOKであること。\n\n```\n$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash\nChecking for `rbenv' in PATH: /home/dev/.rbenv/bin/rbenv\nChecking for rbenv shims in PATH: OK\nChecking `rbenv install' support: /home/dev/.rbenv/plugins/ruby-build/bin/rbenv-install (ruby-build 20200520-12-g69ccbf4)\nCounting installed Ruby versions: none\n  There aren't any Ruby versions installed under `/home/dev/.rbenv/versions'.\n  You can install Ruby versions like so: rbenv install 2.2.4\nChecking RubyGems settings: OK\nAuditing installed plugins: OK\n```\n\n# 問題\n\nrbenv + ruby-build の導入完了後、`rbenv install -v 2.7.1`によって、Ruby2.7.1の導入を行ったが、以下のような原因により失敗した (エラー全文を掲載するとさすがに冗長なため、特徴的な部分を抜粋しています)\n\n- configure: error: no acceptable C compiler found in $PATH\n- cannot load such file -- openssl (LoadError)\n- cannot load such file -- digest/sha2.so (LoadError)\n\n# 原因と対策\n\n__Rubyのビルドに必要なライブラリが不足していることが原因でした。__ruby-buildのwikiには[Rubyのビルドに必要なライブラリとそのインストール方法がOSごとにまとめられているページ](https://github.com/rbenv/ruby-build/wiki)があります。これを参考にして、自分の環境(Ubuntu)に不足しているライブラリのインストールを行ったあと、`rbenv install`を行うとRuby2.7.1を導入することができました。\n\n```\nsudo apt update \nsudo apt-get install autoconf bison build-essential libssl-dev libyaml-dev libreadline6-dev zlib1g-dev libncurses5-dev libffi-dev libgdbm6 libgdbm-dev libdb-dev\n```\n","coediting":false,"comments_count":0,"created_at":"2020-07-05T17:19:21+09:00","group":null,"id":"39e4048a4c19343d0b97","likes_count":6,"private":false,"reactions_count":0,"stocks_count":2,"tags":[{"name":"Ruby","versions":[]}],"title":"rbenv install 2.7.1が「no acceptable C compiler found in $PATH」「cannot load such file」により失敗する","updated_at":"2020-07-05T17:19:21+09:00","url":"https://qiita.com/neko_the_shadow/items/39e4048a4c19343d0b97","user":{"description":"IT業界の片隅でひっそり生きるシステムエンジニアです(´・ω・｀)","facebook_id":"","followees_count":0,"followers_count":36,"github_login_name":null,"id":"neko_the_shadow","items_count":214,"linkedin_id":"","location":"神奈川県川崎市","name":"","organization":"","permanent_id":105859,"profile_image_url":"https://qiita-image-store.s3.amazonaws.com/0/105859/profile-images/1473709753","team_only":false,"twitter_screen_name":"neko_the_shadow","website_url":"https://github.com/nekoTheShadow"},"page_views_count":3969,"team_membership":null,"organization_url_name":null}